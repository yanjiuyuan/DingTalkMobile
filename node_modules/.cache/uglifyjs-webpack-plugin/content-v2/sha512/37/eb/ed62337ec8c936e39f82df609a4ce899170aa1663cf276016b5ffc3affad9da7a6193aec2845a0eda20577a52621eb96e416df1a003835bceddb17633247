{"code":"!function(t){var e={};function a(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&\"object\"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)a.d(i,r,function(e){return t[e]}.bind(null,r));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,\"a\",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p=\"/\",a(a.s=35)}([function(t,e){t.exports=self.AFAppX},function(t,e,a){\"use strict\";e.__esModule=!0;var i,r=a(46),o=(i=r)&&i.__esModule?i:{default:i};e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t}},function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=d(a(3)),r=d(a(1)),o=a(0),n=d(a(21)),l=d(a(61));function d(t){return t&&t.__esModule?t:{default:t}}o.bridge,o.bridge;e.default={data:(0,r.default)({},n.default.data,l.default.data,{version:2.43,DingData:{nickName:\"\",departName:\"\",userid:\"\"},hideMask:!1,param:{},IsNeedChose:!1,flowid:0,taskid:0,nodeid:0,state:\"\",id:0,nodeList:[],projectList:[],nodeInfo:{},FileUrl:\"\",FilePDFUrl:\"\",States:[\"\\u5728\\u7814\",\"\\u5df2\\u5b8c\\u6210\",\"\\u7ec8\\u6b62\"],stateIndex:0,localStorage:\"\",ProjectTypes:[\"\\u81ea\\u7814\\u9879\\u76ee\",\"\\u7eb5\\u5411\\u9879\\u76ee\",\"\\u6a2a\\u5411\\u9879\\u76ee\",\"\\u6d4b\\u8bd5\\u9879\\u76ee\"],projectIndex:-1,departIndex:0,DeptNames:[\"\",\"\\u667a\\u6167\\u5de5\\u5382\\u4e8b\\u4e1a\\u90e8\",\"\\u6570\\u63a7\\u4e00\\u4ee3\\u4e8b\\u4e1a\\u90e8\",\"\\u673a\\u5668\\u4eba\\u4e8b\\u4e1a\\u90e8\",\"\\u884c\\u653f\\u90e8\",\"\\u8d22\\u52a1\\u90e8\",\"\\u5236\\u9020\\u8bd5\\u9a8c\\u90e8\",\"\\u9879\\u76ee\\u63a8\\u8fdb\\u90e8\"],deptIndex:0,CompanyNames:[\"\\u6cc9\\u5dde\\u534e\\u4e2d\\u79d1\\u6280\\u5927\\u5b66\\u667a\\u80fd\\u5236\\u9020\\u7814\\u7a76\\u9662\",\"\\u6cc9\\u5dde\\u534e\\u6570\\u673a\\u5668\\u4eba\\u6709\\u9650\\u516c\\u53f8\"],companyIndex:0,IntellectualPropertyTypes:[\"\\u53d1\\u660e\",\"\\u5b9e\\u7528\\u65b0\\u578b\",\"\\u5916\\u89c2\",\"\\u8f6f\\u4ef6\\u8457\\u4f5c\\u6743\"],iptIndex:0,dateStr:\"\",startDateStr:\"\",endDateStr:\"\",changeRemarkId:0,changeRemarkNodeid:0,hehe:\"\",menu:[{flowId:1,sortId:4,title:\"\\u529e\\u516c\\u7528\\u54c1\\u7533\\u8bf7\",url:\"officeSupplies/officeSupplies\",position:\"-414px -46px\"},{flowId:8,sortId:4,title:\"\\u96f6\\u90e8\\u4ef6\\u91c7\\u8d2d\\u7533\\u8bf7\",url:\"purchase/purchase\",position:\"-414px -137px\"},{flowId:12,sortId:4,title:\"\\u7269\\u6599\\u7f16\\u7801\\u7533\\u8bf7\",url:\"meterieCode/meterieCode\",position:\"-54px -227px\"},{flowId:13,sortId:6,title:\"\\u516c\\u8f66\\u7533\\u8bf7\",url:\"usePublicCar/usePublicCar\",position:\"-775px -317px\"},{flowId:14,sortId:6,title:\"\\u79c1\\u8f66\\u7533\\u8bf7\",url:\"useCar/useCar\",position:\"-504px -405px\"},{flowId:17,sortId:7,title:\"\\u57fa\\u5730\\u52a0\\u73ed\\u7533\\u8bf7\",url:\"overTime/overTime\",position:\"-324px -46px\"},{flowId:26,sortId:4,title:\"\\u9886\\u6599\\u7533\\u8bf7\",url:\"picking/picking\",position:\"-144px -406px\"},{flowId:27,sortId:4,title:\"\\u5165\\u5e93\\u7533\\u8bf7\",url:\"intoStorage/intoStorage\",position:\"-324px -406px\"},{flowId:30,sortId:7,title:\"\\u5916\\u51fa\\u7533\\u8bf7\",url:\"goOut/goOut\",position:\"-144px -316px\"},{flowId:32,sortId:7,title:\"\\u8de8\\u90e8\\u95e8\\u534f\\u52a9\",url:\"crossHelp/crossHelp\",position:\"-594px -316px\"},{flowId:34,sortId:5,title:\"\\u9879\\u76ee\\u6280\\u672f\\u652f\\u6301\",flowName:\"\\u9879\\u76ee\\u6280\\u672f\\u652f\\u6301\",url:\"techonologySupply/techonologySupply\",position:\"-234px -136px\"},{flowId:35,sortId:7,title:\"\\u8de8\\u90e8\\u95e8\\u534f\\u52a9\",url:\"letGoodsGo/letGoodsGo\",position:\"-778px -46px\"},{flowId:36,sortId:5,title:\"\\u77e5\\u8bc6\\u4ea7\\u6743\\u7533\\u8bf7\",url:\"intellectualProperty/intellectualProperty\",position:\"-234px -226px\"},{flowId:67,sortId:4,title:\"\\u501f\\u5165\\u7533\\u8bf7\",url:\"borrowThing/borrowThing\",position:\"-594px -46px\"},{flowId:68,sortId:4,title:\"\\u7ef4\\u4fee\\u7533\\u8bf7\",url:\"maintain/maintain\",position:\"-414px -406px\"},{flowId:66,sortId:4,title:\"\\u9886\\u6599\\u7ba1\\u7406\",url:\"pickingManage/pickingManage\",position:\"-504px -46px\"}],imgUrlList:[],imageList:[],fileList:[],pdfList:[],dingList:[],tableInfo:{},isback:!1,hidden:!0,hiddenCrmk:!0,remark:\"\",ReApprovalTempData:{},disablePage:!1}),func:(0,r.default)({},n.default.func,l.default.func,{start:{onLoad:function(t){console.log(\"start page on load~~~~~~~~~~\"),console.log(t);var e=this,a=\"\",i=!0,r=!1,o=void 0;try{for(var n,l=this.data.menu[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;if(d.flowId==t.flowid){a=d.title;break}}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}this.setData({flowid:t.flowid,\"tableInfo.Title\":a});this.checkLogin(function(){e.getNodeList(),e.getProjectList(),e.getNodeInfo(),e.loadReApproval()})},approvalSubmit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.data.DingData.userid){this.setData({disablePage:!0});var i=[],r={ApplyMan:this.data.DingData.nickName,ApplyManId:this.data.DingData.userid,Dept:this.data.DingData.departName,NodeId:\"0\",ApplyTime:this._getTime(),IsEnable:\"1\",FlowId:this.data.flowid+\"\",IsSend:!1,State:\"1\"};for(var o in t)r[o]=t[o];i.push(r);var n=!0,l=!1,d=void 0;try{for(var s,u=this.data.nodeList[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var c=s.value;if(this.data.nodeInfo.IsNeedChose&&this.data.nodeInfo.ChoseNodeId&&(this.data.nodeInfo.ChoseNodeId.indexOf(c.NodeId)>=0||this.data.addPeopleNodes&&this.data.addPeopleNodes.indexOf(c.NodeId)>=0)||c.NodeName.indexOf(\"\\u7533\\u8bf7\\u4eba\")>=0&&c.NodeId>0){if(0==c.AddPeople.length)return dd.alert({content:\"\\u60a8\\u5c1a\\u672a\\u9009\\u62e9\\u5ba1\\u6279\\u4eba\"}),void(this.data.disablePage=!1);var f=!0,h=!1,p=void 0;try{for(var g,m=c.AddPeople[Symbol.iterator]();!(f=(g=m.next()).done);f=!0){var b=g.value,v={ApplyMan:b.name,ApplyManId:b.userId,IsEnable:1,FlowId:this.data.flowid+\"\",NodeId:c.NodeId+\"\",IsSend:!1,State:0,OldFileUrl:null,IsBack:null};for(var y in a)v[y]=a[y];i.push(v)}}catch(t){h=!0,p=t}finally{try{!f&&m.return&&m.return()}finally{if(h)throw p}}}}}catch(t){l=!0,d=t}finally{try{!n&&u.return&&u.return()}finally{if(l)throw d}}this._postData(\"FlowInfoNew/CreateTaskInfo\",function(t){var a=t;console.log(a),e(a)},i)}else dd.alert({content:\"\\u5c1a\\u672a\\u767b\\u5f55\"})},loadReApproval:function(){var t=this.data.localStorage;t&&t.valid&&(t.valid=!1,8==t.flowid?this.setData({purchaseList:t.data}):this.setData({data:t.data}),this.setData({\"tableInfo.Title\":t.title,flowid:t.flowid,tableItems:t.tableItems,localStorage:t}))},searchCode:function(t){var e=t.detail.value;if(console.log(e),e&&e.keyWord){var a=this;a.requestData(\"GET\",\"Purchase/GetICItem\"+a.formatQueryStr({Key:e.keyWord}),function(t){console.log(JSON.parse(t.data)),a.setData({\"tableParam.total\":JSON.parse(t.data).length}),a.data.data=JSON.parse(t.data),a.getData()})}},chooseItem:function(t){t&&(console.log(t),this.data.good=t.target.targetDataset.row,this.data.good&&(this.setData({hidden:!this.data.hidden}),this.createMaskShowAnim(),this.createContentShowAnim()))},deleteItem:function(t){if(t){console.log(t);var e=t.target.targetDataset.index;(e||0==e)&&(console.log(this.data.purchaseList),this.data.purchaseList.splice(e,1),this.setData({purchaseList:this.data.purchaseList}),console.log(this.data.purchaseList))}}},dowith:{onLoad:function(t){console.log(\"dowith page on load~~~~~~~~~~\"),console.log(t);var e=this;this.setData({flowid:t.flowid,index:t.index,nodeid:parseInt(t.nodeid),taskid:t.taskid,state:t.state});this.checkLogin(function(){e.getFormData(),e.getBomInfo(t.flowid),e.getNodeList(),e.getNodeInfo(),e.getDingList(t.taskid)})},aggreSubmit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.data.DingData.userid){this.setData({disablePage:!0});var a=[];for(var i in a.push({TaskId:this.data.taskid,ApplyMan:this.data.DingData.nickName,ApplyManId:this.data.DingData.userid,Dept:this.data.DingData.departName,NodeId:this.data.nodeid,ApplyTime:this._getTime(),IsEnable:\"1\",FlowId:this.data.flowid,IsSend:\"false\",State:\"1\",Id:this.data.tableInfo.Id,Remark:this.data.remark}),t)a[0][i]=t[i];var r=!0,o=!1,n=void 0;try{for(var l,d=this.data.nodeList[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var s=l.value;if(this.data.nodeInfo.IsNeedChose&&this.data.nodeInfo.ChoseNodeId&&this.data.nodeInfo.ChoseNodeId.indexOf(s.NodeId)>=0||this.data.addPeopleNodes&&this.data.addPeopleNodes.indexOf(s.NodeId)>=0){if(0==s.AddPeople.length)return dd.alert({content:\"\\u60a8\\u5c1a\\u672a\\u9009\\u62e9\\u5ba1\\u6279\\u4eba\"}),void this.setData({disablePage:!1});var u=!0,c=!1,f=void 0;try{for(var h,p=s.AddPeople[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var g=h.value,m={ApplyMan:g.name,ApplyManId:g.userId,TaskId:this.data.taskid,ApplyTime:null,IsEnable:1,FlowId:this.data.flowid,NodeId:s.NodeId,Remark:null,IsSend:s.IsSend,State:0,ImageUrl:null,FileUrl:null,IsPost:!1,OldImageUrl:null,OldFileUrl:null,IsBack:null};for(var b in e)m[b]=e[b];a.push(m)}}catch(t){c=!0,f=t}finally{try{!u&&p.return&&p.return()}finally{if(c)throw f}}}}}catch(t){o=!0,n=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw n}}this._postData(\"FlowInfoNew/SubmitTaskInfo\",function(t){dd.alert({content:\"\\u5ba1\\u6279\\u6210\\u529f\",success:function(){dd.switchTab({url:\"/page/approve/approve\"})}})},a)}else dd.alert({content:\"\\u5c1a\\u672a\\u767b\\u5f55\"})},returnSubmit:function(t){this.setData({disablePage:!0});var e={TaskId:this.data.taskid,ApplyMan:this.data.DingData.nickName,ApplyManId:this.data.DingData.userid,Dept:this.data.DingData.departName,NodeId:this.data.nodeid,ApplyTime:this._getTime(),IsEnable:\"1\",FlowId:this.data.flowid,IsSend:\"false\",State:\"1\",BackNodeId:this.data.nodeInfo.BackNodeId,Id:this.data.tableInfo.Id};t&&t.detail&&t.detail.value?e.Remark=t.detail.value.remark:e.NodeId=0,this._postData(\"FlowInfoNew/FlowBack\",function(t){dd.alert({content:\"\\u9000\\u56de\\u6210\\u529f\",success:function(){dd.switchTab({url:\"/page/approve/approve\"})}})},e)},reApproval:function(){this.data.localStorage=JSON.stringify({valid:!0,flowid:this.data.flowid,data:this.data.tableData,title:this.data.tableInfo.Title,tableItems:this.data.tableItems}),this.setData({disablePage:!0});var t=!0,e=!1,a=void 0;try{for(var i,r=this.data.menu[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;o.flowId==this.data.flowid&&dd.redirectTo({url:\"/page/start/\"+o.url+\"?flowid=\"+o.flowId})}}catch(t){e=!0,a=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw a}}},getFormData:function(){var t=this,e={ApplyManId:this.data.DingData.userid,nodeId:this.data.nodeid,TaskId:this.data.taskid};this._getData(\"FlowInfoNew/GetApproveInfo\"+this.formatQueryStr(e),function(e){t.setData({tableInfo:e}),t.handleUrlData(e)},this.data.DingData)},getBomInfo:function(t){var e=this,a=this,i=\"\";switch(t){case\"1\":i=\"OfficeSupplies/ReadTable\";break;case\"6\":i=\"DrawingUploadNew/GetPurchase\";break;case\"8\":i=\"PurchaseNew/ReadPurchaseTable\";break;case\"12\":i=\"ItemCodeAdd/GetTable\";break;case\"26\":i=\"Pick/Read\";break;case\"27\":i=\"Godown/Read\";break;case\"33\":i=\"DrawingChange/Read\";break;case\"67\":i=\"Borrow/Read\";break;case\"68\":i=\"Maintain/Read\"}i&&(\"12\"!=t?this._getData(i+this.formatQueryStr({TaskId:this.data.taskid}),function(e){if(\"33\"==t){e=e.DrawingChangeList;var i=!0,r=!1,o=void 0;try{for(var n,l=e[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;1==d.ChangeType?d.ChangeType=\"\\u6dfb\\u52a0\":d.ChangeType=\"\\u5220\\u9664\"}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}}a.setData({data:e,\"tableParam.total\":e.length}),a.getData()},a.data.DingData):this.requestData(\"GET\",i,function(a){\"1\"==t&&(a=JSON.parse(a.data)),\"12\"==t&&(a=a.data),e.setData({data:a,\"tableParam.total\":a.length}),e.getData()},{TaskId:this.data.taskid}))},getDingList:function(t){var e=this;this._getData(\"DingTalkServers/Ding?taskId=\"+t,function(t){t.ApplyManId?e.data.dingList.push(t.ApplyManId):e.data.dingList=[]})},ding:function(){dd.createDing({users:this.data.dingList,type:1,alertType:2,text:\"\\u8bf7\\u5e2e\\u6211\\u5ba1\\u6279\\u4e00\\u4e0b\\uff0c\\u5ba1\\u6279\\u7f16\\u53f7\\u4e3a:\"+this.data.taskid})},print:function(){this._postData(\"PurchaseNew/PrintAndSend\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid})},output:function(){this._getData(\"api/PurchaseManage\"+this.formatQueryStr({UserId:this.data.DingData.userid,TaskId:this.data.taskid}),function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\"})})},handleUrlData:function(t){var e=[],a=[],i=[];if(t.ImageUrl&&t.ImageUrl.length>5){var r=t.ImageUrl.split(\",\"),o=!0,n=!1,l=void 0;try{for(var d,s=r[Symbol.iterator]();!(o=(d=s.next()).done);o=!0){var u=d.value;e.push(this.data.dormainName+u.substring(2).replace(/\\\\/g,\"/\"))}}catch(t){n=!0,l=t}finally{try{!o&&s.return&&s.return()}finally{if(n)throw l}}this.setData({imageList:e})}if(t.FileUrl&&t.FileUrl.length>5){this.data.FileUrl=t.FileUrl;for(var c=t.FileUrl.split(\",\"),f=t.OldFileUrl.split(\",\"),h=t.MediaId?t.MediaId.split(\",\"):[],p=0;p<c.length;p++)a.push({name:f[p],path:c[p].replace(/\\\\/g,\"/\"),url:this.data.dormainName+c[p].substring(2).replace(/\\\\/g,\"/\"),mediaId:h[p]});this.setData({fileList:a})}if(t.FilePDFUrl&&t.FilePDFUrl.length>5){this.data.FilePDFUrl=t.FilePDFUrl;c=t.FilePDFUrl.split(\",\"),f=t.OldFilePDFUrl.split(\",\"),h=t.MediaIdPDF?t.MediaIdPDF.split(\",\"):[];var g=t.PdfState?t.PdfState.split(\",\"):[];for(p=0;p<c.length;p++)i.push({name:f[p],url:this.data.dormainName+c[p].substring(2).replace(/\\\\/g,\"/\"),mediaId:h[p],state:g[p]});this.setData({pdfList:i})}}},doneSubmit:function(t){t||(t=\"\\u63d0\\u4ea4\\u5ba1\\u6279\\u6210\\u529f\"),dd.alert({content:t,success:function(){dd.switchTab({url:\"/page/start/index\"})}})},getNodeList:function(){var t=this,e=this,a={FlowId:this.data.flowid,TaskId:this.data.taskid};this._getData(\"FlowInfoNew/GetSign\"+this.formatQueryStr(a),function(a){var i={},r=[],o=!0,n=!1,l=void 0;try{for(var d,s=a[Symbol.iterator]();!(o=(d=s.next()).done);o=!0){var u=d.value;i.NodeName!=u.NodeName||i.ApplyTime||u.ApplyTime?r.push(u):r[r.length-1].ApplyMan=r[r.length-1].ApplyMan+\",\"+u.ApplyMan,i=u}}catch(t){n=!0,l=t}finally{try{!o&&s.return&&s.return()}finally{if(n)throw l}}var c=!0,f=!1,h=void 0;try{for(var p,g=r[Symbol.iterator]();!(c=(p=g.next()).done);c=!0){var m=p.value;m.AddPeople=[],m.ApplyMan&&m.ApplyMan.length>0&&(m.NodePeople=m.ApplyMan.split(\",\")),m.NodeName.indexOf(\"\\u7533\\u8bf7\\u4eba\")>=0&&!m.ApplyMan&&(m.ApplyMan=e.data.DingData.nickName,m.AddPeople=[{name:e.data.DingData.nickName,userId:e.data.DingData.userid}])}}catch(t){f=!0,h=t}finally{try{!c&&g.return&&g.return()}finally{if(f)throw h}}t.getNodeList_done(r),e.setData({nodeList:r,isBack:a[0].IsBack})})},getNodeList_done:function(t){},getProjectList:function(){var t=this;this._getData(\"ProjectNew/GetAllProJect\",function(e){t.setData({projectList:e})})},getNodeInfo:function(){var t=this;this._getData(\"FlowInfoNew/getnodeinfo\"+this.formatQueryStr({FlowId:this.data.flowid,nodeId:this.data.nodeid}),function(e){t.setData({nodeInfo:e[0],IsNeedChose:e[0].IsNeedChose})})},selectStartDateTime:function(){var t=this;dd.datePicker({format:\"yyyy-MM-dd HH:mm\",currentDate:this.data.DateStr+\" \"+this.data.TimeStr,startDate:this.data.DateStr+\" \"+this.data.TimeStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day+\" \"+this.data.TimeStr,success:function(e){t.setData({startDateStr:e.date,\"table.StartTime\":e.date})}})},selectEndDateTime:function(){var t=this;dd.datePicker({format:\"yyyy-MM-dd HH:mm\",currentDate:this.data.DateStr+\" \"+this.data.TimeStr,startDate:this.data.DateStr+\" \"+this.data.TimeStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day+\" \"+this.data.TimeStr,success:function(e){t.setData({endDateStr:e.date,\"table.EndTime\":e.date})}})},selectDate:function(){var t=this;dd.datePicker({currentDate:this.data.DateStr,startDate:this.data.DateStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day,success:function(e){t.setData({dateStr:e.date,\"table.dateStr\":e.date})}})},selectStartDate:function(){var t=this;dd.datePicker({format:\"yyyy-MM-dd\",currentDate:this.data.DateStr,startDate:this.data.DateStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day,success:function(e){t.setData({startDateStr:e.date,\"table.StartTime\":e.date})}})},selectEndDate:function(){var t=this;dd.datePicker({format:\"yyyy-MM-dd\",currentDate:this.data.DateStr,startDate:this.data.DateStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day,success:function(e){t.setData({endDateStr:e.date,\"table.EndTime\":e.date})}})},previewImg:function(t){console.log(t.target.dataset.url),dd.previewImage({urls:[t.target.dataset.url]})},uploadImg:function(t){var e=this;dd.chooseImage({count:2,success:function(t){e.setData({imageList:e.data.imageList});var a=!0,i=!1,r=void 0;try{for(var o,n=t.apFilePaths[Symbol.iterator]();!(a=(o=n.next()).done);a=!0){var l=o.value;e.data.imageList.push(l),e.setData({disablePage:!0}),dd.uploadFile({url:e.data.dormainName+\"drawingupload/Upload\",fileType:\"image\",fileName:l.substring(7),filePath:l,success:function(t){console.log(JSON.parse(t.data).Content),e.data.imgUrlList.push(JSON.parse(t.data).Content),e.setData({disablePage:!1})},fail:function(t){dd.alert({content:\"sorry\"+JSON.stringify(t)})}})}}catch(t){i=!0,r=t}finally{try{!a&&n.return&&n.return()}finally{if(i)throw r}}e.setData({imageList:e.data.imageList})}})},tapReturn:function(t){t&&(this.setData({hidden:!this.data.hidden}),this.createMaskShowAnim(),this.createContentShowAnim())},changeSuggest:function(t){console.log(t.target.dataset.Id),this.data.changeRemarkId=t.target.dataset.Id,this.data.changeRemarkNodeid=t.target.dataset.NodeId,t&&(this.setData({hiddenCrmk:!this.data.hiddenCrmk}),this.createMaskShowAnim(),this.createContentShowAnim())},changeRemark:function(t){var e=this;this.setData({disablePage:!0});var a={Id:this.data.changeRemarkId,Remark:t.detail.value.remark},r=this.data.changeRemarkNodeid;this.setData((0,i.default)({},\"nodeList[\"+r+\"].Remark\",a.Remark)),console.log(\"DingTalkServers/ChangeRemark   !!!!!!!\"),console.log(a),this._postData(\"DingTalkServers/ChangeRemark\",function(t){e.setData({disablePage:!1}),dd.alert({content:\"\\u4fee\\u6539\\u6210\\u529f\"}),e.onModalCloseTap2()},a)},onModalCloseTap:function(){var t=this;this.createMaskHideAnim(),this.createContentHideAnim(),setTimeout(function(){t.setData({hidden:!0})},210)},onModalCloseTap2:function(){var t=this;this.createMaskHideAnim(),this.createContentHideAnim(),setTimeout(function(){t.setData({hiddenCrmk:!0})},210)},downloadFile:function(t){console.log(\"\\u4e0b\\u8f7d\\u6587\\u4ef6~~~~~~~~~~\");var e={UserId:this.data.DingData.userid,Media_Id:t.target.dataset.mediaId};console.log(t),this.requestData(\"POST\",\"DingTalkServers/sendFileMessage\",function(t){dd.alert({content:\"\\u63d0\\u793a\\u4fe1\\u606f:\"+JSON.parse(t.data).errmsg})},e)},checkLogin:function(t){var e=this,a=(0,o.getApp)();if(a.userInfo){var i={nickName:a.userInfo.name,departName:a.userInfo.dept,userid:a.userInfo.userid};return e.setData({DingData:i}),t(),0}dd.showLoading({content:\"\\u767b\\u5f55\\u4e2d...\"}),console.log(\"\\u6211\\u6267\\u884c\\u4e86\"),dd.getAuthCode({success:function(i){console.log(i.authCode),n.default.func._getData(\"LoginMobile/Bintang\"+n.default.func.formatQueryStr({authCode:i.authCode}),function(i){a.userInfo=i;var r={nickName:i.name,departName:i.dept,userid:i.userid};dd.hideLoading(),e.setData({DingData:r}),t()})}})},checkLogin2:function(t){var e=this,a=(0,o.getApp)();dd.getAuthCode({success:function(i){console.log(i.authCode),n.default.func._getData(\"LoginMobile/Bintang\"+n.default.func.formatQueryStr({authCode:i.authCode}),function(i){if(i.userid){a.userInfo=i;var r={nickName:i.name,departName:i.dept,userid:i.userid};dd.hideLoading(),e.setData({DingData:r}),t()}else dd.alert({content:i.errmsg+\",\\u8bf7\\u5173\\u6389\\u5e94\\u7528\\u91cd\\u65b0\\u6253\\u5f00\\u8bd5\\u8bd5~\"})})}})},bindPickerChange:function(t){for(var e=0;e<this.data.nodeList.length;e++)this.data.nodeList[e].NodeName.indexOf(\"\\u9879\\u76ee\\u8d1f\\u8d23\\u4eba\")>=0&&(this.data.nodeList[e].AddPeople=[{name:this.data.projectList[t.detail.value].ResponsibleMan,userId:this.data.projectList[t.detail.value].ResponsibleManId}],this.setData({nodeList:this.data.nodeList}));this.setData({projectIndex:t.detail.value})},bindDeptChange:function(t){this.setData({departIndex:t.detail.value})}})},t.exports=e.default},function(t,e,a){\"use strict\";e.__esModule=!0;var i,r=a(58),o=(i=r)&&i.__esModule?i:{default:i};e.default=function(t,e,a){return e in t?(0,o.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},function(t,e,a){var i=a(29)(\"wks\"),r=a(31),o=a(6).Symbol,n=\"function\"==typeof o;(t.exports=function(t){return i[t]||(i[t]=n&&o[t]||(n?o:r)(\"Symbol.\"+t))}).store=i},function(t,e){var a=t.exports={version:\"2.6.5\"};\"number\"==typeof __e&&(__e=a)},function(t,e){var a=t.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=a)},function(t,e,a){var i=a(11),r=a(50),o=a(51),n=Object.defineProperty;e.f=a(8)?Object.defineProperty:function(t,e,a){if(i(t),e=o(e,!0),i(a),r)try{return n(t,e,a)}catch(t){}if(\"get\"in a||\"set\"in a)throw TypeError(\"Accessors not supported!\");return\"value\"in a&&(t[e]=a.value),t}},function(t,e,a){t.exports=!a(14)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(t,e,a){var i=a(6),r=a(5),o=a(22),n=a(10),l=a(12),d=function(t,e,a){var s,u,c,f=t&d.F,h=t&d.G,p=t&d.S,g=t&d.P,m=t&d.B,b=t&d.W,v=h?r:r[e]||(r[e]={}),y=v.prototype,D=h?i:p?i[e]:(i[e]||{}).prototype;for(s in h&&(a=e),a)(u=!f&&D&&void 0!==D[s])&&l(v,s)||(c=u?D[s]:a[s],v[s]=h&&\"function\"!=typeof D[s]?a[s]:m&&u?o(c,i):b&&D[s]==c?function(t){var e=function(e,a,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,a)}return new t(e,a,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):g&&\"function\"==typeof c?o(Function.call,c):c,g&&((v.virtual||(v.virtual={}))[s]=c,t&d.R&&y&&!y[s]&&n(y,s,c)))};d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,t.exports=d},function(t,e,a){var i=a(7),r=a(15);t.exports=a(8)?function(t,e,a){return i.f(t,e,r(1,a))}:function(t,e,a){return t[e]=a,t}},function(t,e,a){var i=a(13);t.exports=function(t){if(!i(t))throw TypeError(t+\" is not an object!\");return t}},function(t,e){var a={}.hasOwnProperty;t.exports=function(t,e){return a.call(t,e)}},function(t,e){t.exports=function(t){return\"object\"===typeof t?null!==t:\"function\"===typeof t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError(\"Can't call method on  \"+t);return t}},function(t,e){var a=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:a)(t)}},function(t,e,a){var i=a(29)(\"keys\"),r=a(31);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,a){var i=a(16);t.exports=function(t){return Object(i(t))}},function(t,e){t.exports={}},function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=a(0),r=(i.bridge,i.bridge,\"http://17e245o364.imwork.net:49415/\");function o(t){return t?t.error&&0!=t.error.errorCode?(dd.alert({content:t.error.errorMessage}),1):0:1}var n=new Date,l=n.getFullYear(),d=n.getMonth()+1,s=n.getDate(),u=n.getHours(),c=n.getMinutes();function f(t,e,a){arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4]}function h(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),r=t.getHours(),o=t.getMinutes(),n=t.getSeconds();return a<10&&(a=\"0\"+a),i<10&&(i=\"0\"+i),r<10&&(r=\"0\"+r),o<10&&(o=\"0\"+o),n<10&&(n=\"0\"+n),e+\"-\"+a+\"-\"+i+\" \"+r+\":\"+o+\":\"+n}e.default={data:{jinDomarn:\"http://wuliao5222.55555.io:35705/api/\",dormainName:r,currentPage:1,totalRows:0,pageSize:5,Year:l,Month:d,Day:s,DateStr:function(t,e){e||(e=\"-\");var a=new Date(t),i=a.getFullYear(),r=a.getMonth()+1,o=a.getDate();r<10&&(r=\"0\"+r);o<10&&(o=\"0\"+o);return i+e+r+e+o}(n),TimeStr:u+\":\"+c},func:{checkLogin:function(){},goHome:function(){console.log(\"welCome ~\")},goError:function(){},_getData:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};dd.httpRequest({url:r+t,method:\"GET\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded; charset=utf-8\"},success:function(r){var n=(0,i.getApp)();n.userInfo&&(a=n.userInfo),console.log(t),console.log(r),o(r.data)?f(\"GET\",t,r.data.error,a):e(r.data.data)},fail:function(e){\"{}\"!=JSON.stringify(e)&&(f(\"GET\",t,e,a),dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25-\"+t+\"\\u62a5\\u9519:\"+JSON.stringify(e)}))}})},_postData:function(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};dd.httpRequest({url:r+t,method:\"POST\",data:JSON.stringify(a),headers:{\"Content-Type\":\"application/json; charset=utf-8\",Accept:\"application/json\"},success:function(r){var l=(0,i.getApp)();l.userInfo&&(n=l.userInfo),console.log(t),console.log(a),console.log(r),o(r.data)?f(\"GET\",t,r.data.error,n):e(r.data.data)},fail:function(e){console.log(\"\\u5728\\u9519\\u8bef\\u91cc\\u9762~~~~~~~~~~~\"),\"{}\"!=JSON.stringify(e)&&(f(\"GET\",t,e,n),dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25-\"+t+\"\\u62a5\\u9519:\"+JSON.stringify(e)}))}})},requestData:function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};arguments[4];dd.httpRequest({url:r+e,method:t,data:i,headers:{\"Content-Type\":\"application/x-www-form-urlencoded; charset=utf-8\"},success:function(r){console.log(e),\"POST\"!=t&&\"post\"!=t||console.log(i),console.log(r),a(r)},fail:function(t){\"{}\"!=JSON.stringify(t)&&dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25-\"+e+\"\\u62a5\\u9519:\"+JSON.stringify(t)})},complete:function(t){}})},requestJsonData:function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};arguments[4];dd.httpRequest({url:r+e,method:t,data:i,headers:{\"Content-Type\":\"application/json; charset=utf-8\",Accept:\"application/json\"},success:function(r){console.log(e),\"POST\"!=t&&\"post\"!=t||console.log(i),console.log(r),a(r)},fail:function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25-\"+e+\"\\u62a5\\u9519:\"+JSON.stringify(t)})},complete:function(t){}})},requestNofailData:function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments[4];dd.httpRequest({url:r+e,method:t,data:i,headers:{\"Content-Type\":\"application/json; charset=utf-8\",Accept:\"application/json\"},success:function(r){console.log(e),\"POST\"!=t&&\"post\"!=t||console.log(i),console.log(r),0!=r.data.error.errorCode&&f(t,e,i,{Message:r.data.Message,error:r.error},o),a(r)},complete:function(a){a&&a.error&&(dd.alert({content:\"\\u7cfb\\u7edf\\u6b63\\u5728\\u7ef4\\u62a4\\uff0c\\u8bf7\\u8054\\u7cfb\\u7ba1\\u7406\\u5458~~~~~~~~~~~~~\"}),console.log(\"complete\\u5904\\u7406\\u9519\\u8bef~~~~~~~~~~~~~~~~~~~~~~\"),console.log(o),console.log(a.data),f(t,e,i,{Message:a.data.Message,error:a.error},o))}})},mergeObjectArr:function(t,e,a){for(var i=0;i<t.length;i++)for(var r=0;r<e.length;r++)if(t[i][a]==e[r][a])for(var o in e[r])t[i][o]=e[r][o];return t},formatQueryStr:function(t){var e=\"?\";for(var a in t)e=e+a+\"=\"+encodeURI(t[a])+\"&\";return e.substring(0,e.length-1)},_formatQueryStr:function(t){var e=\"?\";for(var a in t)e=e+a+\"=\"+t[a]+\"&\";return e.substring(0,e.length-1)},_getTime:function(){return h()},_computeDurTime:function(t,e,a){var i=e.getTime()-t.getTime(),r=Math.floor(i/864e5),o=Math.floor(i/36e5),n=Math.floor(i/6e4),l=Math.floor(i/1e3);switch(a){case\"d\":return r;case\"h\":return o;case\"m\":return n;default:return l}}}},t.exports=e.default},function(t,e,a){var i=a(49);t.exports=function(t,e,a){if(i(t),void 0===e)return t;switch(a){case 1:return function(a){return t.call(e,a)};case 2:return function(a,i){return t.call(e,a,i)};case 3:return function(a,i,r){return t.call(e,a,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,a){var i=a(13),r=a(6).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,a){var i=a(53),r=a(32);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,a){var i=a(26),r=a(16);t.exports=function(t){return i(r(t))}},function(t,e,a){var i=a(27);t.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==i(t)?t.split(\"\"):Object(t)}},function(t,e){var a={}.toString;t.exports=function(t){return a.call(t).slice(8,-1)}},function(t,e,a){var i=a(17),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,a){var i=a(5),r=a(6),o=r[\"__core-js_shared__\"]||(r[\"__core-js_shared__\"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})(\"versions\",[]).push({version:i.version,mode:a(30)?\"pure\":\"global\",copyright:\"\\xa9 2019 Denis Pushkarev (zloirock.ru)\"})},function(t,e){t.exports=!0},function(t,e){var a=0,i=Math.random();t.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++a+i).toString(36))}},function(t,e){t.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},function(t,e,a){var i=a(7).f,r=a(12),o=a(4)(\"toStringTag\");t.exports=function(t,e,a){t&&!r(t=a?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/maintain/maintain\",usingComponents:{}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{hidden:!0,tableItems:[{prop:\"CodeNo\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"Name\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"Standard\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"Unit\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"Price\",label:\"\\u5355\\u4ef7(\\u9884\\u8ba1)\",width:200},{prop:\"Count\",label:\"\\u6570\\u91cf\",width:100},{prop:\"MaintainContent\",label:\"\\u7ef4\\u4fee\\u5185\\u5bb9\",width:300},{prop:\"NeedTime\",label:\"\\u9700\\u7528\\u65f6\\u95f4\",width:200},{prop:\"Mark\",label:\"\\u5907\\u6ce8\",width:300}]}),submit:function(t){var e=t.detail.value,a={Title:e.title,Remark:e.remark};this.aggreSubmit(a)},print:function(){this._postData(\"Maintain/PrintPDF\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid})},output:function(){this._postData(\"Maintain/PrintExcel\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid})}}))},function(t,e,a){t.exports=a(36)},function(module,exports,__webpack_require__){\"use strict\";function success(){__webpack_require__(40),__webpack_require__(41),__webpack_require__(42),__webpack_require__(43),__webpack_require__(44),__webpack_require__(45),__webpack_require__(62),__webpack_require__(63),__webpack_require__(64),__webpack_require__(65),__webpack_require__(66),__webpack_require__(67),__webpack_require__(68),__webpack_require__(69),__webpack_require__(70),__webpack_require__(71),__webpack_require__(72),__webpack_require__(73),__webpack_require__(74),__webpack_require__(75),__webpack_require__(76),__webpack_require__(77),__webpack_require__(78),__webpack_require__(79),__webpack_require__(80),__webpack_require__(81),__webpack_require__(82),__webpack_require__(83),__webpack_require__(84),__webpack_require__(85),__webpack_require__(105),__webpack_require__(106),__webpack_require__(107),__webpack_require__(108),__webpack_require__(109),__webpack_require__(110),__webpack_require__(111),__webpack_require__(112),__webpack_require__(113),__webpack_require__(114),__webpack_require__(34),__webpack_require__(115),__webpack_require__(34),__webpack_require__(116),__webpack_require__(117)}!function(){var CircularJSON=JSON,replacer=function(t,e){return void 0===e?\"\\xa9undefined\":null===e?\"\\xa9null\":e===-1/0?\"\\xa9- Infinity\":e===1/0?\"\\xa9Infinity\":\"number\"===typeof e&&isNaN(e)?\"\\xa9NaN\":\"function\"===typeof e?\"\\xa9function\":e};try{CircularJSON=eval('(function(JSON,RegExp){var specialChar=\"~\",safeSpecialChar=\"\\\\\\\\x\"+(\"0\"+specialChar.charCodeAt(0).toString(16)).slice(-2),escapedSafeSpecialChar=\"\\\\\\\\\"+safeSpecialChar,specialCharRG=new RegExp(safeSpecialChar,\"g\"),safeSpecialCharRG=new RegExp(escapedSafeSpecialChar,\"g\"),safeStartWithSpecialCharRG=new RegExp(\"(?:^|([^\\\\\\\\\\\\\\\\]))\"+escapedSafeSpecialChar),indexOf=[].indexOf||function(v){for(var i=this.length;i--&&this[i]!==v;);return i},$String=String;function generateReplacer(value,replacer,resolve){var doNotIgnore=false,inspect=!!replacer,path=[],all=[value],seen=[value],mapp=[resolve?specialChar:\"[Circular]\"],last=value,lvl=1,i,fn;if(inspect){fn=typeof replacer===\"object\"?function(key,value){return key!==\"\"&&replacer.indexOf(key)<0?void 0:value}:replacer}return function(key,value){if(inspect)value=fn.call(this,key,value);if(doNotIgnore){if(last!==this){i=lvl-indexOf.call(all,this)-1;lvl-=i;all.splice(lvl,all.length);path.splice(lvl-1,path.length);last=this}if(typeof value===\"object\"&&value){if(indexOf.call(all,value)<0){all.push(last=value)}lvl=all.length;i=indexOf.call(seen,value);if(i<0){i=seen.push(value)-1;if(resolve){path.push((\"\"+key).replace(specialCharRG,safeSpecialChar));mapp[i]=specialChar+path.join(specialChar)}else{mapp[i]=mapp[0]}}else{value=mapp[i]}}else{if(typeof value===\"string\"&&resolve){value=value.replace(safeSpecialChar,escapedSafeSpecialChar).replace(specialChar,safeSpecialChar)}}}else{doNotIgnore=true}return value}}function retrieveFromPath(current,keys){for(var i=0,length=keys.length;i<length;current=current[keys[i++].replace(safeSpecialCharRG,specialChar)]);return current}function generateReviver(reviver){return function(key,value){var isString=typeof value===\"string\";if(isString&&value.charAt(0)===specialChar){return new $String(value.slice(1))}if(key===\"\")value=regenerate(value,value,{});if(isString)value=value.replace(safeStartWithSpecialCharRG,\"$1\"+specialChar).replace(escapedSafeSpecialChar,safeSpecialChar);return reviver?reviver.call(this,key,value):value}}function regenerateArray(root,current,retrieve){for(var i=0,length=current.length;i<length;i++){current[i]=regenerate(root,current[i],retrieve)}return current}function regenerateObject(root,current,retrieve){for(var key in current){if(current.hasOwnProperty(key)){current[key]=regenerate(root,current[key],retrieve)}}return current}function regenerate(root,current,retrieve){return current instanceof Array?regenerateArray(root,current,retrieve):current instanceof $String?current.length?retrieve.hasOwnProperty(current)?retrieve[current]:retrieve[current]=retrieveFromPath(root,current.split(specialChar)):root:current instanceof Object?regenerateObject(root,current,retrieve):current}var CircularJSON={stringify:function stringify(value,replacer,space,doNotResolve){return CircularJSON.parser.stringify(value,generateReplacer(value,replacer,!doNotResolve),space)},parse:function parse(text,reviver){return CircularJSON.parser.parse(text,generateReviver(reviver))},parser:JSON};return CircularJSON})(JSON,RegExp)')}catch(t){console.error(t)}var OriginalFunction=Function,OriginalFetch=self.fetch,callInternalAPI=function(t,e){var a={data:{method:t,param:e},action:\"internalAPI\"},i=encodeURIComponent(JSON.stringify(a));if(OriginalFetch)OriginalFetch(\"https://alipay.kylinBridge/?data=\"+i,{mode:\"no-cors\"}).then(function(){}).catch(function(){});else if(self.AlipayJSBridge)AlipayJSBridge.call(\"internalAPI\",{method:t,param:e});else var r=setInterval(function(){self.AlipayJSBridge&&(AlipayJSBridge.call(\"internalAPI\",{method:t,param:e}),clearInterval(r))},60)},eventHandler=function(t){try{if(t.fromVConsoleToWorker){var e=t.requestId;if(\"exec\"===t.method){try{new OriginalFunction(\"requestId\",\"sendBack\",\"\\n              const res = \"+t.script+\";\\n              console.log(res);\\n            \")(e,function(t){return callInternalAPI(\"tinyDebugConsole\",{type:\"msgFromWorkerToVConsole\",content:CircularJSON.stringify({requestId:e,returnValue:t},replacer)})})}catch(t){console.error(t.name+\":\"+t.message)}}}}catch(t){}};setTimeout(function(){self.document&&self.document.addEventListener(\"push\",function(t){try{eventHandler(JSON.parse(t.data.param.content))}catch(t){}}),self.addEventListener(\"push\",function(t){try{var e=JSON.parse(JSON.parse(t.data.text()).param.data.content);eventHandler(e)}catch(t){}})},10),[\"log\",\"info\",\"error\",\"debug\",\"warn\"].forEach(function(t){var e=\"o\"+t;console[e]||(console[e]=console[t],console[t]=function(){for(var a,i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];(a=console)[e].apply(a,r);var n=void 0;try{n=CircularJSON.stringify(r.map(function(t){return t instanceof Error?t.name+\": \"+t.message:t}),replacer)}catch(t){return void console.error(t.name+\": \"+t.message)}callInternalAPI(\"tinyDebugConsole\",{content:n,type:\"console_\"+t})})})}(),__webpack_require__(37),__webpack_require__(39),self.bootstrapApp?self.bootstrapApp({success:success}):success()},function(t,e,a){\"use strict\";(function(t){var e=\"undefined\"!==typeof t?t:self;e.appXRuntimeConfig={},e.appXAppJson={app:{$homepage:\"page/start/index\"}}}).call(this,a(38))},function(t,e){var a;a=function(){return this}();try{a=a||new Function(\"return this\")()}catch(t){\"object\"===typeof window&&(a=window)}t.exports=a},function(t,e,a){\"use strict\";importScripts(\"https://appx/af-appx.worker.min.js\")},function(t,e,a){\"use strict\";var i,r=a(0),o=a(21);(i=o)&&i.__esModule;r.bridge,r.bridge;(0,r.App)({onLaunch:function(t){},onShow:function(){},onHide:function(){},userInfo:null,globalData:{hasLogin:!1,appId:189694580}})},function(t,e,a){\"use strict\";var i=a(0),r=i.WorkerComponent||function(){};i.bridge,i.bridge;i.$global.currentComponentConfig={is:\"/util/table/table\",usingComponents:{}},r({mixins:[],data:{},props:{},didMount:function(){},didUpdate:function(){},didUnmount:function(){},methods:{}})},function(t,e,a){\"use strict\";var i=a(0),r=i.WorkerComponent||function(){};i.bridge,i.bridge;i.$global.currentComponentConfig={is:\"/util/table/column/column\",usingComponents:{}},r({mixins:[],data:{tableData:[]},props:{label:\"\\u5c5e\\u6027\\u540d\",prop:\"value\",width:100},didMount:function(){(0,i.getApp)();this.setData({tableData:this.$page.data.tableData})},didUpdate:function(){},didUnmount:function(){},methods:{}})},function(t,e,a){\"use strict\";a.r(e);var i=a(0),r=i.WorkerComponent||function(){};i.bridge,i.bridge;i.$global.currentComponentConfig={is:\"/node_modules/mini-ddui/es/list/index\",usingComponents:{}},r({props:{className:\"\"}})},function(t,e,a){\"use strict\";a.r(e);var i=a(0),r=i.WorkerComponent||function(){};i.bridge,i.bridge;i.$global.currentComponentConfig={is:\"/node_modules/mini-ddui/es/list/list-item/index\",usingComponents:{}},r({props:{className:\"\",align:!1,disabled:!1,multipleLine:!1,wrap:!1},methods:{onItemTap:function(t){var e=this.props,a=e.onClick,i=e.disabled;a&&!i&&a({index:t.target.dataset.index})}}})},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/start/index\",tabIndex:10,usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}};(0,r.getApp)().globalData;(0,r.Page)((0,i.default)({},o.default.func,{onLoad:function(){this.getMenu(),this.checkLogin2(function(){}),this.getUserInfo()},data:(0,i.default)({},o.default.data,{pageName:\"component/index\",pageInfo:{pageId:0},curIndex:0,userIndex:-1,userList:[],sort:[],sortItems:[]}),choosePeople:function(t){console.log(\"start choose people\");var e=this;dd.complexChoose((0,i.default)({},e.chooseParam,{multiple:!1,success:function(t){if(console.log(t),t.users.length>0){var a=t.users[0].name,i=t.users[0].userId,o=(0,r.getApp)();o.userInfo.name=a,o.userInfo.userid=i,e.setData({DingData:{nickName:a,userid:i}})}},fail:function(t){}}))},upLoadFile:function(){dd.uploadAttachmentToDingTalk({image:{multiple:!0,compress:!1,max:9,spaceId:\"12345\"},space:{spaceId:\"12345\",isCopy:1,max:9},file:{spaceId:\"12345\",max:1},types:[\"photo\",\"camera\",\"file\",\"space\"],success:function(t){console.log(t),dd.alert({content:JSON.stringify(t)})},fail:function(t){dd.alert({content:JSON.stringify(t)})}})},selectUser:function(t){var e=t.detail.value,a=this.data.userList[e].NodePeople,i=this.data.userList[e].PeopleId,o=(0,r.getApp)();o.userInfo.name=a,o.userInfo.userid=i,this.setData({DingData:{nickName:a,userid:i},userIndex:t.detail.value})},getUserInfo:function(){var t=this;this._getData(\"FlowInfoNew/GetUserInfo\",function(e){t.setData({userList:e})})},getMenu:function(){var t=this;this._getData(\"FlowInfoNew/LoadFlowSort?id=123\",function(e){var a=e;t.setData({sort:e});var i=[];t._getData(\"FlowInfoNew/LoadFlowInfo?id=123\",function(e){var r=t.mergeObjectArr(e,t.data.menu,\"flowId\"),o=!0,n=!1,l=void 0;try{for(var d,s=a[Symbol.iterator]();!(o=(d=s.next()).done);o=!0){var u=d.value;i.push({text:\"\\u6536\\u8d77\",class:\"dropdown-content-show\"}),u.show=!1;var c=!0,f=!1,h=void 0;try{for(var p,g=r[Symbol.iterator]();!(c=(p=g.next()).done);c=!0){var m=p.value;if(m.url&&m.sortId==u.SORT_ID){u.show=!0;break}}}catch(t){f=!0,h=t}finally{try{!c&&g.return&&g.return()}finally{if(f)throw h}}}}catch(t){n=!0,l=t}finally{try{!o&&s.return&&s.return()}finally{if(n)throw l}}t.setData({sort:a,menu:r,sortItems:i})})})},showOrClose:function(t){console.log(this.data.DingData),console.log(this.data.menu);var e=t.target.dataset.index;if(\"\\u5c55\\u5f00\"==this.data.sortItems[e].text){var a=this.data.sortItems;a[e]={text:\"\\u6536\\u8d77\",class:\"dropdown-content-show\"},this.setData({sortItems:a})}else if(\"\\u6536\\u8d77\"===this.data.sortItems[e].text){var i=this.data.sortItems;i[e]={text:\"\\u5c55\\u5f00\",class:\"dropdown-content\"},this.setData({sortItems:i})}}}))},function(t,e,a){t.exports={default:a(47),__esModule:!0}},function(t,e,a){a(48),t.exports=a(5).Object.assign},function(t,e,a){var i=a(9);i(i.S+i.F,\"Object\",{assign:a(52)})},function(t,e){t.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},function(t,e,a){t.exports=!a(8)&&!a(14)(function(){return 7!=Object.defineProperty(a(23)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(t,e,a){var i=a(13);t.exports=function(t,e){if(!i(t))return t;var a,r;if(e&&\"function\"==typeof(a=t.toString)&&!i(r=a.call(t)))return r;if(\"function\"==typeof(a=t.valueOf)&&!i(r=a.call(t)))return r;if(!e&&\"function\"==typeof(a=t.toString)&&!i(r=a.call(t)))return r;throw TypeError(\"Can't convert object to primitive value\")}},function(t,e,a){\"use strict\";var i=a(24),r=a(56),o=a(57),n=a(19),l=a(26),d=Object.assign;t.exports=!d||a(14)(function(){var t={},e={},a=Symbol(),i=\"abcdefghijklmnopqrst\";return t[a]=7,i.split(\"\").forEach(function(t){e[t]=t}),7!=d({},t)[a]||Object.keys(d({},e)).join(\"\")!=i})?function(t,e){for(var a=n(t),d=arguments.length,s=1,u=r.f,c=o.f;d>s;)for(var f,h=l(arguments[s++]),p=u?i(h).concat(u(h)):i(h),g=p.length,m=0;g>m;)c.call(h,f=p[m++])&&(a[f]=h[f]);return a}:d},function(t,e,a){var i=a(12),r=a(25),o=a(54)(!1),n=a(18)(\"IE_PROTO\");t.exports=function(t,e){var a,l=r(t),d=0,s=[];for(a in l)a!=n&&i(l,a)&&s.push(a);for(;e.length>d;)i(l,a=e[d++])&&(~o(s,a)||s.push(a));return s}},function(t,e,a){var i=a(25),r=a(28),o=a(55);t.exports=function(t){return function(e,a,n){var l,d=i(e),s=r(d.length),u=o(n,s);if(t&&a!=a){for(;s>u;)if((l=d[u++])!=l)return!0}else for(;s>u;u++)if((t||u in d)&&d[u]===a)return t||u||0;return!t&&-1}}},function(t,e,a){var i=a(17),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):o(t,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,a){t.exports={default:a(59),__esModule:!0}},function(t,e,a){a(60);var i=a(5).Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},function(t,e,a){var i=a(9);i(i.S+i.F*!a(8),\"Object\",{defineProperty:a(7).f})},function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i,r=a(1),o=(i=r)&&i.__esModule?i:{default:i},n=a(0);n.bridge,n.bridge;var l=(0,n.getApp)().globalData;e.default={data:{animMaskData:[],animContentData:[],nodeList:[],chooseParam:{title:\"\\u5ba1\\u6279\\u9009\\u4eba\",multiple:!1,limitTips:\"\\u8d85\\u51fa\\u4e86\\u4eba\\u6570\\u8303\\u56f4\",maxUsers:10,pickedUsers:[],pickedDepartments:[],appId:l.appId,responseUserOnly:!1,startWithDepartmentId:0},tableData:[],tableParam:{size:5,now:1,total:0}},func:{choosePeople:function(t){console.log(\"start choose people\");var e=t.target.targetDataset.NodeId,a=this;dd.complexChoose((0,o.default)({},a.chooseParam,{success:function(t){console.log(t);var i=!0,r=!1,o=void 0;try{for(var n,l=a.data.nodeList[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;d.NodeId==e&&(d.AddPeople=t.users)}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}a.setData({nodeList:a.data.nodeList})},fail:function(t){}}))},choosePeopleOne:function(t){console.log(\"start choose people\");var e=t.target.dataset.NodeId,a=this;e&&dd.complexChoose((0,o.default)({},a.data.chooseParam,{success:function(t){console.log(t);var i=!0,r=!1,o=void 0;try{for(var n,l=a.data.nodeList[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;d.NodeId==e&&(d.AddPeople=t.users)}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}console.log(a.data.nodeList),a.setData({nodeList:a.data.nodeList,ChoosePeople:!0})},fail:function(t){console.log(\"fail!!\")}}))},choosePeopleTwo:function(t){console.log(\"start choose people\");var e=t.target.dataset.NodeId,a=this;e&&dd.complexChoose((0,o.default)({},a.data.chooseParam,{success:function(t){console.log(t);var i=!0,r=!1,o=void 0;try{for(var n,l=a.data.nodeList[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;d.NodeId==e&&(d.AddPeople=t.users,d.ApplyMan=t.users[0].name,d.ApplyManId=t.users[0].userId,d.NodePeople=[t.users[0].name])}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}console.log(a.data.nodeList),a.setData({nodeList:a.data.nodeList,ChoosePeople:!0})},fail:function(t){console.log(\"fail!!\")}}))},NodePeople:function(t){console.log(t.currentTarget.dataset.NodePeople);dd.complexChoose({title:\"\\u5df2\\u9009\\u4eba\\u6570\",success:function(t){},fail:function(t){console.log(\"fail!!\")}})},getData:function(){var t=this.data.tableParam.size*(this.data.tableParam.now-1),e=this.data.data.slice(t,t+this.data.tableParam.size);this.setData({tableData:e}),console.log(this.data.tableData)},handleCurrentChange:function(t){var e=t.target.dataset.page;this.setData({\"tableParam.now\":e}),this.getData()},createMaskShowAnim:function(){var t=dd.createAnimation({duration:200,timingFunction:\"cubic-bezier(.55, 0, .55, .2)\"});this.maskAnim=t,t.opacity(1).step(),this.setData({animMaskData:t.export()})},createMaskHideAnim:function(){this.maskAnim.opacity(0).step(),this.setData({animMaskData:this.maskAnim.export()})},createContentShowAnim:function(){var t=dd.createAnimation({duration:200,timingFunction:\"cubic-bezier(.55, 0, .55, .2)\"});this.contentAnim=t,t.translateY(0).step(),this.setData({animContentData:t.export()})},createContentHideAnim:function(){this.contentAnim.translateY(\"100%\").step(),this.setData({animContentData:this.contentAnim.export()})},changeSuggest:function(t){this.setData({changeRemarkId:t.target.targetDataset.NodeId})}}},t.exports=e.default},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approve/approve\",tabIndex:11,usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\",list:\"/node_modules/mini-ddui/es/list/index\",\"list-item\":\"/node_modules/mini-ddui/es/list/list-item/index\"}},(0,r.Page)((0,i.default)({},o.default.func,{data:(0,i.default)({},o.default.data,{activeItem:0,pageIndex:1,pageCount:0,clientHeight:400,size:5,items:[{index:0,name:\"\\u5f85\\u6211\\u5ba1\\u6279\",image:\"../../image/1.png\"},{index:1,name:\"\\u6211\\u5df2\\u5ba1\\u6279\",image:\"../../image/1.png\"},{index:2,name:\"\\u6211\\u53d1\\u8d77\\u7684\",image:\"../../image/2.png\"},{index:3,name:\"\\u6284\\u9001\\u6211\\u7684\",image:\"../../image/3.png\"}],approveList:[]}),onLoad:function(t){},onShow:function(){var t=this;setTimeout(function(){t.checkLogin(function(){t.getApproveList(t.data.activeItem)})},200)},onReady:function(){var t=this;dd.getSystemInfo({success:function(e){console.log(e),t.setData({clientHeight:e.windowHeight-.14*e.windowHeight})}})},changeItem:function(t){this.data.size=5;var e=this,a=t.target.dataset.index;a!=this.data.activeItem&&(this.setData({activeItem:a}),this.checkLogin(function(){e.getApproveList(a)}))},search:function(t){var e=t.detail.value;this.getApproveList(this.data.activeItem,e.keyword)},onPullDownRefresh:function(){var t=this;this.checkLogin(function(){t.getApproveList(t.data.activeItem)}),dd.stopPullDownRefresh()},getApproveList:function(t,e){var a=this,i={Index:t,ApplyManId:a.data.DingData.userid,IsSupportMobile:!0,pageIndex:1,pageSize:this.data.size};e&&(i.Key=e),dd.showLoading({content:\"\\u83b7\\u53d6\\u5ba1\\u6279\\u5217\\u8868\\u4e2d\\uff0c\\u8bf7\\u7a0d\\u5019~\"}),a._getData(\"FlowInfoNew/GetFlowStateDetail\"+a.formatQueryStr(i),function(t){a.setData({approveList:t.slice(0,50),pageCount:Math.ceil(t.length/5)}),dd.hideLoading()})},toDetial:function(t){var e=t.target.dataset.row,a=this;console.log(e),3==this.data.activeItem?a._getData(\"FlowInfoNew/ChangeSendState\"+a.formatQueryStr({TaskId:e.TaskId,UserId:a.data.DingData.userid}),function(t){a.router(e)}):a.router(e)},router:function(t){if(t.TaskId&&t.FlowId){var e={taskid:t.TaskId,flowid:t.FlowId,nodeid:t.NodeId,id:t.Id,index:this.data.activeItem,state:t.State},a=\"\";switch(t.FlowId){case 1:a=\"/page/approveDetail/officeSupplies/officeSupplies\";break;case 6:a=\"/page/approveDetail/paper/paper\";break;case 8:a=\"/page/approveDetail/purchase/purchase\";break;case 12:a=\"/page/approveDetail/meterieCode/meterieCode\";break;case 13:a=\"/page/approveDetail/usePublicCar/usePublicCar\";break;case 14:a=\"/page/approveDetail/useCar/useCar\";break;case 18:a=\"/page/approveDetail/officePurchase/officePurchase\";break;case 19:a=\"/page/approveDetail/sendRead/sendRead\";break;case 26:a=\"/page/approveDetail/picking/picking\";break;case 27:a=\"/page/approveDetail/intoStorage/intoStorage\";break;case 30:a=\"/page/approveDetail/goOut/goOut\";break;case 31:a=\"/page/approveDetail/createProject/createProject\";break;case 32:a=\"/page/approveDetail/crossHelp/crossHelp\";break;case 33:a=\"/page/approveDetail/changePaper/changePaper\";break;case 34:a=\"/page/approveDetail/techonologySupply/techonologySupply\";break;case 35:a=\"/page/approveDetail/letGoodsGo/letGoodsGo\";break;case 36:a=\"/page/approveDetail/intellectualProperty/intellectualProperty\";break;case 67:a=\"/page/approveDetail/borrowThing/borrowThing\";break;case 68:a=\"/page/approveDetail/maintain/maintain\"}dd.navigateTo({url:a+this._formatQueryStr(e)})}},scroll:function(){this.data.size=this.data.size+5,this.getApproveList(this.data.activeItem)}}))},function(t,e,a){\"use strict\";var i=l(a(3)),r=l(a(1)),o=a(0),n=l(a(2));function l(t){return t&&t.__esModule?t:{default:t}}o.bridge,o.bridge;o.$global.currentPageConfig={pagePath:\"page/start/purchase/purchase\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}};var d={};(0,o.Page)((0,r.default)({},n.default.func,n.default.func.start,{data:(0,r.default)({},n.default.data,{hidden:!0,tableOperate:\"\\u9009\\u62e9\",purchaseList:[],addPeopleNodes:[1],tableParam2:{size:100,now:1,total:0},tableOperate2:\"\\u5220\\u9664\",good:{},totalPrice:0,tableItems:[{prop:\"FNumber\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"FName\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"FModel\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"FNote\",label:\"\\u9884\\u8ba1\\u5355\\u4ef7\",width:100}],tableItems2:[{prop:\"CodeNo\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"Name\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"Standard\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"Unit\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"Price\",label:\"\\u5355\\u4ef7\",width:100},{prop:\"Count\",label:\"\\u6570\\u91cf\",width:100},{prop:\"Purpose\",label:\"\\u7528\\u9014\",width:300},{prop:\"UrgentDate\",label:\"\\u9700\\u7528\\u65e5\\u671f\",width:200},{prop:\"Mark\",label:\"\\u5907\\u6ce8\",width:300}]}),search:function(t){var e=t.detail.value;if(console.log(e),e&&e.keyWord){var a=this;a.requestData(\"GET\",\"Purchase/GetICItem\"+a.formatQueryStr({Key:e.keyWord}),function(t){console.log(JSON.parse(t.data)),a.setData({\"tableParam.total\":JSON.parse(t.data).length}),a.data.data=JSON.parse(t.data),a.getData()})}},submit:function(t){var e=this,a=t.detail.value,i={Title:a.title,Remark:a.remark,ProjectName:e.data.projectList[e.data.projectIndex].ProjectName,ProjectId:e.data.projectList[e.data.projectIndex].ProjectId};if(i.ProjectId&&this.data.purchaseList.length){console.log(i),this.approvalSubmit(i,function(t){e.bindAll(t)})}else dd.alert({content:\"\\u8868\\u5355\\u586b\\u5199\\u4e0d\\u5b8c\\u6574\"})},bindAll:function(t){var e=this,a=[],i=!0,r=!1,o=void 0;try{for(var n,l=e.data.purchaseList[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;d.TaskId=t,a.push(d)}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}e.requestJsonData(\"POST\",\"Purchase/SavePurchaseTable\",function(t){e.doneSubmit()},JSON.stringify(a))},chooseItem:function(t){t&&(console.log(t),(d=t.target.targetDataset.row)&&(this.setData({hidden:!this.data.hidden}),this.createMaskShowAnim(),this.createContentShowAnim()))},deleteItem:function(t){if(t){console.log(t);var e=t.target.targetDataset.index;(e||0==e)&&(console.log(this.data.purchaseList),this.data.purchaseList.splice(e,1),this.setData({purchaseList:this.data.purchaseList}),console.log(this.data.purchaseList))}},selectDate:function(){var t=this;dd.datePicker({currentDate:this.data.DateStr,startDate:this.data.DateStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day,success:function(e){t.setData({dateStr:e.date})}})},addGood:function(t){var e,a=t.detail.value;console.log(a);var r=!0,o=!1,n=void 0;try{for(var l,s=this.data.purchaseList[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){if(l.value.CodeNo==d.FNumber)return}}catch(t){o=!0,n=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw n}}if(a&&a.Unit&&a.Count&&a.UrgentDate&&a.Purpose){var u={CodeNo:d.FNumber,Name:d.FName,Standard:d.FModel,Unit:a.Unit,Price:a.Price?a.Price+\"\":\"0\",Count:a.Count,Purpose:a.Purpose,UrgentDate:a.UrgentDate,Mark:a.Mark},c=this.data.purchaseList.length;this.setData((e={},(0,i.default)(e,\"purchaseList[\"+c+\"]\",u),(0,i.default)(e,\"totalPrice\",this.data.totalPrice+u.Price*u.Count+\"\"),e)),console.log(u.Purpose),this.onModalCloseTap()}else dd.alert({content:\"\\u8868\\u5355\\u586b\\u5199\\u4e0d\\u5b8c\\u6574\"})},onModalCloseTap:function(){var t=this;this.createMaskHideAnim(),this.createContentHideAnim(),setTimeout(function(){t.setData({hidden:!0})},210)},saveTempData:function(){localStorage.setItem(\"purchase\",JSON.stringify(this.data.purchaseList)),dd.alert({content:\"\\u4fdd\\u5b58\\u6210\\u529f\"})},loadTempData:function(){var t=JSON.parse(localStorage.getItem(\"purchase\"));t&&t.length&&t.length>0&&(this.setData({purchaseList:t}),localStorage.removeItem(\"purchase\"))},onShow:function(){}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/purchase/purchase\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{hidden:!0,totalPrice:\"0\",tableItems:[{prop:\"CodeNo\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"Name\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"Standard\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"Unit\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"Price\",label:\"\\u5355\\u4ef7(\\u9884\\u8ba1)\",width:200},{prop:\"Count\",label:\"\\u6570\\u91cf\",width:100},{prop:\"Purpose\",label:\"\\u7528\\u9014\",width:300},{prop:\"UrgentDate\",label:\"\\u9700\\u7528\\u65e5\\u671f\",width:200},{prop:\"Mark\",label:\"\\u5907\\u6ce8\",width:300}]}),submit:function(t){var e=t.detail.value,a={Title:e.title,Remark:e.remark};this.aggreSubmit(a)},print:function(){this._postData(\"PurchaseNew/PrintAndSend\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid})},output:function(){this._getData(\"api/PurchaseManage\"+this.formatQueryStr({UserId:this.data.DingData.userid,TaskId:this.data.taskid}),function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\"})})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/usePublicCar/usePublicCar\",usingComponents:{}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{carName:\"\",carIndex:-1,carList:[],useTimeList:[],table:{}}),submit:function(t){var e=this,a=t.detail.value,i={Remark:a.remark};if(this.data.table.CarNumber=this.data.table.CarId,this.data.table.StartKilometres=a.StartKilometres,this.data.table.EndKilometres=a.EndKilometres,this.data.table.UseKilometres=parseInt(a.EndKilometres)-parseInt(a.StartKilometres),a.StartKilometres&&a.EndKilometres||3!=this.data.nodeid&&4!=this.data.nodeid){if(2==this.data.nodeid){if(!this.data.table.CarId)return;i.Title=this.data.tableInfo.Title+\"-\"+this.data.carList[this.data.carIndex].Name}this.setData({disablePage:!0}),this.requestData(\"POST\",\"CarTableNew/TableModify\",function(t){e.aggreSubmit(i)},this.data.table)}else dd.alert({content:\"\\u8868\\u5355\\u672a\\u586b\\u5199\\u5b8c\\u6574\"})},print:function(){this._postData(\"CarTableNew/GetPrintPDF\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\\uff0c\\u8bf7\\u5728\\u9489\\u9489PC\\u7aef\\u67e5\\u6536\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid,IsPublic:!0})},selectCar:function(t){var e=this.data.carList[t.detail.value];if(this.setData({useTimeList:[]}),console.log(e),this.data.table.CarId=e.Id,this.data.table.Name=e.Name,this.data.table.CarNumber=e.CarNumber,this.data.table.OccupyCarId=e.OccupyCarId,this.data.table.IsOccupyCar=e.IsOccupyCar,this.setData({carIndex:t.detail.value,carName:e.Name+\" - \"+e.CarNumber}),e.UseMan){for(var a=[],i=e.UseMan.split(\",\"),r=e.UseTimes.split(\",\"),o=0;o<i.length;o++)e.IsOccupyCar&&a.push({name:i[o],time:r[o]});this.setData({useTimeList:a}),console.log(this.data.useTimeList)}},reApproval:function(){this.data.localStorage=JSON.stringify({valid:!0,flowid:this.data.flowid,title:this.data.tableInfo.Title,table:this.data.table});var t=!0,e=!1,a=void 0;try{for(var i,r=this.data.menu[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;o.flowId==this.data.flowid&&dd.redirectTo({url:\"/page/start/\"+o.url+\"?flowid=\"+o.flowId})}}catch(t){e=!0,a=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw a}}},onReady:function(){var t=this,e=this;this._getData(\"CarTableNew/TableQuary\"+this.formatQueryStr({TaskId:this.data.taskid}),function(a){var i=a[0];i.FactTravelWay||(i.FactTravelWay=i.PlantTravelWay),i.PeerNumber||(i.PeerNumber=\"\"),t.setData({table:i}),e._getData(\"CarMananger/QuaryByTimeNew\"+e.formatQueryStr({startTime:i.StartTime,endTime:i.EndTime}),function(t){var a=!0,r=!1,o=void 0;try{for(var n,l=t[Symbol.iterator]();!(a=(n=l.next()).done);a=!0){var d=n.value;d.text=d.Name+\" - \"+d.CarNumber,d.Id==i.CarId&&e.setData({carName:d.Name+\" - \"+d.CarNumber,\"table.Name\":d.Name})}}catch(t){r=!0,o=t}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}if(!e.data.table.CarId){var s=t[0];e.data.table.CarId=s.Id,e.data.table.Name=s.Name,e.data.table.OccupyCarId=s.OccupyCarId,e.data.table.IsOccupyCar=s.IsOccupyCar}e.setData({carList:t})})})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/start/usePublicCar/usePublicCar\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.start,{data:(0,i.default)({},o.default.data,{disablePage:!0,checked:!1,checked2:!1,items:[{name:\"\\u672c\\u4eba\\u540c\\u610f\\u300a\\u7814\\u7a76\\u9662\\u8f66\\u8f86\\u5b89\\u5168\\u4f7f\\u7528\\u534f\\u8bae\\u300b\"}],items2:[{name:\"\\u672c\\u4eba\\u5df2\\u7ecf\\u63d0\\u4ea4\\u5916\\u51fa\\u7533\\u8bf7\"}]}),submit:function(t){if(\"0907095238746571\"!=this.data.nodeList[1].AddPeople[0].userId){var e=this,a=t.detail.value;if(a.CarId=\"\",a.IsChooseOccupyCar=!0,a.IsPublicCar=!0,a.OccupyCarId=\"\",a.DrivingMan&&a.MainContent&&a.PlantTravelWay&&a.StartTime&&a.EndTime){this.approvalSubmit(a,function(t){console.log(\"\\u63d0\\u4ea4\\u5ba1\\u6279ok!\"),a.TaskId=t,e._postData(\"CarTableNew/TableSave\",function(t){e.doneSubmit()},a)},{Title:a.Title})}else dd.alert({content:\"\\u8868\\u5355\\u672a\\u586b\\u5199\\u5b8c\\u6574\"})}else dd.alert({content:\"\\u7528\\u8f66\\u65e0\\u9700\\u5b63\\u8001\\u5e08\\u5ba1\\u6279,\\u5982\\u662f\\u90e8\\u957f\\u7ea7\\u8bf7\\u9009\\u672c\\u4eba\"})},choosePeoples:function(t){console.log(\"start choose people\");t.target.targetDataset.NodeId;var e=this;dd.complexChoose((0,i.default)({},e.chooseParam,{multiple:!0,success:function(t){console.log(t);var a=[],i=!0,r=!1,o=void 0;try{for(var n,l=t.users[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;a.push(d.name)}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}e.setData({\"table.PeerNumber\":a.join(\",\")})},fail:function(t){}}))},loadReApproval:function(){var t=this.data.localStorage;t&&t.valid&&(t.valid=!1,this.setData({table:t.table,\"tableInfo.Title\":t.title,flowid:t.flowid,localStorage:t}))},onChecked:function(t){console.log(!this.data.checked),this.setData({checked:!this.data.checked,disablePage:this.data.checked})},onChecked2:function(t){this.setData({checked2:!this.data.checked2,disablePage:this.data.checked2})},downLoad:function(){var t={UserId:this.data.DingData.userid,Media_Id:\"@lAnPBY0V4-rKP9rOTtf42s5H6UHz\"};this._postData(\"DingTalkServers/sendFileMessageNew\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\\uff0c\\u8bf7\\u5728PC\\u7aef\\u67e5\\u6536\"})},t)},selectStartDateTime:function(){var t=this;dd.datePicker({format:\"yyyy-MM-dd HH:mm\",currentDate:this.data.DateStr+\" \"+this.data.TimeStr,startDate:this.data.DateStr+\" \"+this.data.TimeStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day+\" \"+this.data.TimeStr,success:function(e){t.setData({\"table.StartTime\":e.date})}})},selectEndDateTime:function(){var t=this;dd.datePicker({format:\"yyyy-MM-dd HH:mm\",currentDate:this.data.DateStr+\" \"+this.data.TimeStr,startDate:this.data.DateStr+\" \"+this.data.TimeStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day+\" \"+this.data.TimeStr,success:function(e){t.setData({\"table.EndTime\":e.date})}})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/paper/paper\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{hidden:!0,totalPrice:\"0\",tableItems:[{prop:\"Sorts\",label:\"\\u7c7b\\u522b\",width:100},{prop:\"DrawingNo\",label:\"\\u4ee3\\u53f7\",width:300},{prop:\"Name\",label:\"\\u540d\\u79f0\",width:300},{prop:\"Count\",label:\"\\u6570\\u91cf\",width:100},{prop:\"MaterialScience\",label:\"\\u6750\\u6599\",width:200},{prop:\"Unit\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"SingleWeight\",label:\"\\u5355\\u91cd\",width:100},{prop:\"AllWeight\",label:\"\\u603b\\u91cd\",width:100},{prop:\"NeedTime\",label:\"\\u9700\\u7528\\u65e5\\u671f\",width:200},{prop:\"Mark\",label:\"\\u5907\\u6ce8\",width:300}],imageList:[],fileList:[],pdfList:[]}),submit:function(t){var e=t.detail.value,a={Title:e.title,Remark:e.remark};this.aggreSubmit(a)},print:function(){this._postData(\"DrawingUploadNew/PrintAndSend\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\\uff0c\\u8bf7\\u5728\\u9489\\u9489\\u5de5\\u4f5c\\u901a\\u77e5\\u4e2d\\u67e5\\u6536\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid,OldPath:this.data.FilePDFUrl.replace(/\\\\/g,\"\\\\\\\\\")})},downloadAllPdf:function(){this._getData(\"NewsAndCases/GetAllPDF\"+this.formatQueryStr({ApplyManId:this.data.DingData.userid,taskId:this.data.taskid}),function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\\uff0c\\u8bf7\\u5728\\u9489\\u9489\\u5de5\\u4f5c\\u901a\\u77e5\\u4e2d\\u67e5\\u6536\"})})},setPdfState:function(t){var e=t.target.dataset.index;\"1\"==this.data.pdfList[e].state?this.data.pdfList[e].state=\"0\":this.data.pdfList[e].state=\"1\",this.setData({pdfList:this.data.pdfList});var a=[],i=!0,r=!1,o=void 0;try{for(var n,l=this.data.pdfList[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;a.push(d.state)}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}var s=\"FileNew/UpdatePDFState?TaskId=\"+this.data.taskid+\"&PDFState=\"+a.join(\",\");this._getData(s,function(t){})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/start/useCar/useCar\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.start,{data:(0,i.default)({},o.default.data,{hidden:!0,checked:!1,checked2:!1,table:{},items:[{name:\"\\u672c\\u4eba\\u540c\\u610f\\u300a\\u79c1\\u8f66\\u516c\\u7528\\u534f\\u8bae\\u4e66\\u300b\"}],items2:[{name:\"\\u672c\\u4eba\\u5df2\\u7ecf\\u63d0\\u4ea4\\u5916\\u51fa\\u7533\\u8bf7\"}]}),submit:function(t){var e=this;if(\"0907095238746571\"!=this.data.nodeList[1].AddPeople[0].userId){var a=t.detail.value;if(a.CarId=\"\",a.IsChooseOccupyCar=!0,a.IsPublicCar=!1,a.OccupyCarId=\"\",console.log(a),a.DrivingMan&&a.MainContent&&a.PlantTravelWay&&a.StartTime&&a.EndTime&&a.CarNumber){if(!this.data.checked||!this.data.checked2)return console.log(this.data.checked),console.log(this.data.checked2),void dd.alert({content:\"\\u672a\\u5168\\u52fe\\u9009\\u2018\\u540c\\u610f\\u2019\\u9009\\u9879\"});this.approvalSubmit({Title:a.Title},function(t){console.log(\"\\u63d0\\u4ea4\\u5ba1\\u6279ok!\"),a.TaskId=t,e._postData(\"CarTableNew/TableSave\",function(t){e.doneSubmit()},a)})}else dd.alert({content:\"\\u8868\\u5355\\u672a\\u586b\\u5199\\u5b8c\\u6574\"})}else dd.alert({content:\"\\u7528\\u8f66\\u65e0\\u9700\\u5b63\\u8001\\u5e08\\u5ba1\\u6279,\\u5982\\u662f\\u90e8\\u957f\\u7ea7\\u8bf7\\u9009\\u672c\\u4eba\"})},choosePeoples:function(t){console.log(\"start choose people\");t.target.targetDataset.NodeId;var e=this;dd.complexChoose((0,i.default)({},e.chooseParam,{multiple:!0,success:function(t){console.log(t);var a=[],i=!0,r=!1,o=void 0;try{for(var n,l=t.users[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;a.push(d.name)}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}e.setData({\"table.PeerNumber\":a.join(\",\")})},fail:function(t){}}))},onChecked:function(t){this.setData({checked:!this.data.checked,disablePage:this.data.checked})},onChecked2:function(t){this.setData({checked2:!this.data.checked2,disablePage:this.data.checked2})},loadReApproval:function(){var t=this.data.localStorage;t&&t.valid&&(t.valid=!1,this.setData({table:t.table,\"tableInfo.Title\":t.title,flowid:t.flowid,localStorage:t}))},downLoad:function(){var t={UserId:this.data.DingData.userid,Media_Id:\"@lArPDeC2t0PoLXvOAzqTa84ublTK\"};this._postData(\"DingTalkServers/sendFileMessageNew\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\\uff0c\\u8bf7\\u5728PC\\u7aef\\u67e5\\u6536\"})},t)},selectStartDateTime:function(){var t=this;dd.datePicker({format:\"yyyy-MM-dd HH:mm\",currentDate:this.data.DateStr+\" \"+this.data.TimeStr,startDate:this.data.DateStr+\" \"+this.data.TimeStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day+\" \"+this.data.TimeStr,success:function(e){t.setData({\"table.StartTime\":e.date})}})},selectEndDateTime:function(){var t=this;dd.datePicker({format:\"yyyy-MM-dd HH:mm\",currentDate:this.data.DateStr+\" \"+this.data.TimeStr,startDate:this.data.DateStr+\" \"+this.data.TimeStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day+\" \"+this.data.TimeStr,success:function(e){t.setData({\"table.EndTime\":e.date})}})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/useCar/useCar\",usingComponents:{}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{useTimeList:[],imgUrlList:[],table:{}}),uploadImg:function(t){var e=this;dd.chooseImage({count:1,sourceType:[\"camera\"],success:function(t){e.setData({imageList:e.data.imageList});var a=!0,i=!1,r=void 0;try{for(var o,n=t.apFilePaths[Symbol.iterator]();!(a=(o=n.next()).done);a=!0){var l=o.value;e.data.imageList.push(l),e.setData({disablePage:!0}),dd.uploadFile({url:e.data.dormainName+\"drawingupload/Upload\",fileType:\"image\",fileName:l.substring(7),filePath:l,success:function(t){console.log(JSON.parse(t.data).Content),e.data.imgUrlList.push(JSON.parse(t.data).Content),e.setData({disablePage:!1})},fail:function(t){dd.alert({content:\"sorry\"+JSON.stringify(t)})}})}}catch(t){i=!0,r=t}finally{try{!a&&n.return&&n.return()}finally{if(i)throw r}}e.setData({imageList:e.data.imageList})}})},addPlace:function(){var t=this;dd.chooseImage({count:1,sourceType:[\"camera\"],success:function(e){var a=!0,i=!1,r=void 0;try{for(var o,n=e.apFilePaths[Symbol.iterator]();!(a=(o=n.next()).done);a=!0){var l=o.value;t.setData({disablePage:!0}),dd.showLoading({content:\"\\u56fe\\u7247\\u5904\\u7406\\u4e2d...\"}),dd.uploadFile({url:t.data.dormainName+\"drawingupload/Upload?IsWaterMark=true\",fileType:\"image\",fileName:l.substring(7),IsWaterMark:!0,filePath:l,success:function(e){console.log(e),t.data.tableInfo.ImageUrl?t.data.tableInfo.ImageUrl+=\",\":t.data.tableInfo.ImageUrl=\"\",t.data.tableInfo.ImageUrl+=JSON.parse(e.data).Content,t._postData(\"FlowInfoNew/TaskModify\",function(e){t.getFormData(),t.setData({disablePage:!1}),dd.hideLoading()},t.data.tableInfo)},fail:function(t){dd.alert({content:\"sorry\"+JSON.stringify(t)})}})}}catch(t){i=!0,r=t}finally{try{!a&&n.return&&n.return()}finally{if(i)throw r}}}})},deleteImg:function(){this.data.imgUrlList=this.data.tableInfo.ImageUrl.split(\",\"),this.setData({imageList:this.data.imageList.splice(0,this.data.imageList.length-1)}),this.data.tableInfo.ImageUrl=this.data.imgUrlList.slice(0,this.data.imgUrlList.length-1).join(\",\"),this._postData(\"FlowInfoNew/TaskModify\",function(t){},this.data.tableInfo)},submit:function(t){var e=this,a=t.detail.value;if(a.StartKilometres&&a.EndKilometres||3!=this.data.nodeid&&4!=this.data.nodeid){if(3==this.data.nodeid&&this.data.imageList.length<2)return console.log(this.data.imageList),void dd.alert({content:\"\\u9700\\u8981\\u4e0a\\u4f20\\u8d77\\u6b62\\u516c\\u91cc\\u6570\\u56fe\\u7247\"});var i={Title:a.title,Remark:a.remark};this.data.table.FactTravelWay=a.FactTravelWay,this.data.table.StartKilometres=a.StartKilometres,this.data.table.EndKilometres=a.EndKilometres,this.data.table.UseKilometres=parseInt(a.EndKilometres)-parseInt(a.StartKilometres),this.setData({disablePage:!0}),this._postData(\"CarTableNew/TableModify\",function(t){e.aggreSubmit(i)},this.data.table)}else dd.alert({content:\"\\u8868\\u5355\\u672a\\u586b\\u5199\\u5b8c\\u6574\"})},print:function(){this._postData(\"CarTableNew/GetPrintPDF\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\\uff0c\\u8bf7\\u5728\\u9489\\u9489PC\\u7aef\\u67e5\\u6536\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid,IsPublic:!1},this.data.DingData)},reApproval:function(){this.data.localStorage=JSON.stringify({valid:!0,flowid:this.data.flowid,title:this.data.tableInfo.Title,table:this.data.table});var t=!0,e=!1,a=void 0;try{for(var i,r=this.data.menu[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;o.flowId==this.data.flowid&&dd.redirectTo({url:\"/page/start/\"+o.url+\"?flowid=\"+o.flowId})}}catch(t){e=!0,a=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw a}}},onReady:function(){var t=this;this._getData(\"CarTableNew/TableQuary\"+this.formatQueryStr({TaskId:this.data.taskid}),function(e){var a=e[0];a.FactTravelWay||(a.FactTravelWay=a.PlantTravelWay),a.PeerNumber||(a.PeerNumber=\"\"),t.setData({table:a})})}}))},function(t,e,a){\"use strict\";var i=l(a(3)),r=l(a(1)),o=a(0),n=l(a(2));function l(t){return t&&t.__esModule?t:{default:t}}o.bridge,o.bridge;o.$global.currentPageConfig={pagePath:\"page/start/picking/picking\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}};var d={};(0,o.Page)((0,r.default)({},n.default.func,n.default.func.start,{data:(0,r.default)({},n.default.data,{hidden:!0,tableOperate:\"\\u9009\\u62e9\",purchaseList:[],tableParam2:{size:100,now:1,total:0},tableOperate2:\"\\u5220\\u9664\",tableOperate3:\"\\u7f16\\u8f91\",ifedit:!1,good:{},goods:[],totalPrice:0,addPeopleNodes:[1],tableItems:[{prop:\"fNumber\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"fName\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"left\",label:\"\\u5e93\\u5b58\\u6570\\u91cf\",width:200},{prop:\"fModel\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"unitName\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"fFullName\",label:\"\\u4f9b\\u5e94\\u5546\",width:300}],tableItems2:[{prop:\"fNumber\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"fQty\",label:\"\\u5b9e\\u6536\\u6570\\u91cf\",width:200},{prop:\"left\",label:\"\\u5e93\\u5b58\\u6570\\u91cf\",width:200},{prop:\"fName\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"fModel\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"unitName\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"fFullName\",label:\"\\u4f9b\\u5e94\\u5546\",width:300}]}),search:function(t){var e=this;dd.showLoading({content:\"\\u83b7\\u53d6\\u4e2d...\"});var a=t.detail.value;if(console.log(a.keyWord),a&&a.keyWord){var i=this.data.jinDomarn+\"Pick/ReadPickInfoSingle\"+this.formatQueryStr({keyWord:a.keyWord});dd.httpRequest({url:i,method:\"GET\",success:function(t){dd.hideLoading(),console.log(i),console.log(t.data.data);var a=t.data.data,r=!0,o=!1,n=void 0;try{for(var l,d=a[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var s=l.value;s.left=parseInt(s.fQty)}}catch(t){o=!0,n=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw n}}0==a.length&&dd.showToast({content:\"\\u6682\\u65e0\\u6570\\u636e\"}),e.setData({\"tableParam.total\":a.length}),console.log(a),e.data.goods=a,e.data.data=a,e.getData()}})}},searchAndAdd2:function(t){dd.showLoading({content:\"\\u83b7\\u53d6\\u4e2d...\"});var e=t.detail.value;if(console.log(e.keyWord),e&&e.keyWord){var a=this;this._getData(\"Pick/ReadDefault\"+this.formatQueryStr({ApplyManId:a.data.DingData.userid,TaskId:e.keyWord}),function(t){dd.hideLoading();var e=[],r=a.data.purchaseList.length;0==t.length&&dd.showToast({content:\"\\u6682\\u65e0\\u6570\\u636e\"});var o=!0,n=!1,l=void 0;try{for(var d,s=t[Symbol.iterator]();!(o=(d=s.next()).done);o=!0){var u=d.value,c=!1,f=!0,h=!1,p=void 0;try{for(var g,m=a.data.purchaseList[Symbol.iterator]();!(f=(g=m.next()).done);f=!0){var b=g.value;u.fNumber==b.fNumber&&(c=!0)}}catch(t){h=!0,p=t}finally{try{!f&&m.return&&m.return()}finally{if(h)throw p}}if(c)break;u.left=u.fQty,a.data.goods.push(u),e.push(u)}}catch(t){n=!0,l=t}finally{try{!o&&s.return&&s.return()}finally{if(n)throw l}}for(var v=0;v<e.length;v++)a.setData((0,i.default)({},\"purchaseList[\"+(r+v)+\"]\",e[v]))})}},searchAndAdd:function(t){dd.showLoading({content:\"\\u83b7\\u53d6\\u4e2d...\"});var e=t.detail.value;if(console.log(e.keyWord),e&&e.keyWord){var a=this,r=this.data.jinDomarn+\"Pick/ReadPickingInfo\"+a.formatQueryStr({UnitName:e.keyWord});dd.httpRequest({url:r,method:\"GET\",success:function(t){dd.hideLoading(),console.log(r),console.log(t.data.data),0==t.data.data.length&&dd.showToast({content:\"\\u6682\\u65e0\\u6570\\u636e\"});var e=[],o=a.data.purchaseList.length,n=!0,l=!1,d=void 0;try{for(var s,u=t.data.data[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var c=s.value,f=!1,h=!0,p=!1,g=void 0;try{for(var m,b=a.data.purchaseList[Symbol.iterator]();!(h=(m=b.next()).done);h=!0){var v=m.value;c.fNumber==v.fNumber&&(f=!0)}}catch(t){p=!0,g=t}finally{try{!h&&b.return&&b.return()}finally{if(p)throw g}}if(f)break;a.data.goods.push(c),e.push(c)}}catch(t){l=!0,d=t}finally{try{!n&&u.return&&u.return()}finally{if(l)throw d}}for(var y=0;y<e.length;y++)a.setData((0,i.default)({},\"purchaseList[\"+(o+y)+\"]\",e[y]))},fail:function(t){dd.alert({content:JSON.stringify(t)})}})}},submit:function(t){var e=this,a=t.detail.value;if(this.data.projectIndex<0||!a.title)return console.log(a),void dd.alert({content:\"\\u8868\\u5355\\u586b\\u5199\\u4e0d\\u5b8c\\u6574\"});var i={Title:a.title,Remark:a.remark,ProjectName:e.data.projectList[e.data.projectIndex].ProjectName,ProjectId:e.data.projectList[e.data.projectIndex].ProjectId};console.log(i),this.approvalSubmit(i,function(t){e.bindAll(t)},{ProjectId:i.ProjectId})},bindAll:function(t){var e=this,a=[],i=!0,r=!1,o=void 0;try{for(var n,l=e.data.purchaseList[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;d.TaskId=t,a.push(d)}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}e._postData(\"Pick/Save\",function(t){e.doneSubmit()},a)},chooseItem:function(t){t&&(console.log(t),(d=t.target.targetDataset.row)&&(this.setData({hidden:!this.data.hidden,ifedit:!1}),this.createMaskShowAnim(),this.createContentShowAnim()))},deleteItem:function(t){if(t){console.log(t);var e=t.target.targetDataset.index;if(e||0==e)if(t.target.targetDataset.opt2){if(!(d=t.target.targetDataset.row))return;this.setData({hidden:!this.data.hidden,ifedit:!0}),this.createMaskShowAnim(),this.createContentShowAnim()}else console.log(this.data.purchaseList),this.data.purchaseList.splice(e,1),this.setData({purchaseList:this.data.purchaseList}),console.log(this.data.purchaseList)}},addGood:function(t){var e=t.detail.value;if(console.log(e),e&&e.fQty){if(this.data.ifedit)for(var a=0;a<this.data.purchaseList.length;a++){var r=!0,o=!1,n=void 0;try{for(var l,s=this.data.goods[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;if(this.data.purchaseList[a].fNumber==u.fNumber&&parseInt(e.fQty)>parseInt(u.left))return void dd.alert({content:\"\\u5927\\u4e8e\\u53ef\\u7528\\u6570\\u91cf\"})}}catch(t){o=!0,n=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw n}}this.data.purchaseList[a].fNumber==d.fNumber&&(d.fQty=e.fQty?e.fQty+\"\":\"1\",this.setData((0,i.default)({},\"purchaseList[\"+a+\"]\",d)))}else{var c=!0,f=!1,h=void 0;try{for(var p,g=this.data.purchaseList[Symbol.iterator]();!(c=(p=g.next()).done);c=!0){if(p.value.fNumber==d.fNumber)return void dd.alert({content:\"\\u91cd\\u590d\\u63d0\\u4ea4\"})}}catch(t){f=!0,h=t}finally{try{!c&&g.return&&g.return()}finally{if(f)throw h}}if(e.fQty>d.left)return void dd.alert({content:\"\\u5927\\u4e8e\\u53ef\\u7528\\u6570\\u91cf\"});var m={fNumber:d.fNumber,fName:d.fName,fModel:d.fModel,unitName:d.unitName,left:d.left,fQty:e.fQty?e.fQty+\"\":\"1\",fPrice:d.fPrice?d.fPrice+\"\":\"0\",fAmount:d.fAmount?d.fAmount+\"\":\"0\",fFullName:d.fFullName},b=this.data.purchaseList.length;this.setData((0,i.default)({},\"purchaseList[\"+b+\"]\",m))}this.onModalCloseTap()}else dd.alert({content:\"\\u8868\\u5355\\u586b\\u5199\\u4e0d\\u5b8c\\u6574\"})},onModalCloseTap:function(){var t=this;this.createMaskHideAnim(),this.createContentHideAnim(),setTimeout(function(){t.setData({hidden:!0})},210)},saveTempData:function(){localStorage.setItem(\"purchase\",JSON.stringify(this.data.purchaseList)),dd.alert({content:\"\\u4fdd\\u5b58\\u6210\\u529f\"})},loadTempData:function(){var t=JSON.parse(localStorage.getItem(\"purchase\"));t&&t.length&&t.length>0&&(this.setData({purchaseList:t}),localStorage.removeItem(\"purchase\"))},onShow:function(){}}))},function(t,e,a){\"use strict\";var i=l(a(3)),r=l(a(1)),o=a(0),n=l(a(2));function l(t){return t&&t.__esModule?t:{default:t}}o.bridge,o.bridge;o.$global.currentPageConfig={pagePath:\"page/start/intoStorage/intoStorage\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}};var d={};(0,o.Page)((0,r.default)({},n.default.func,n.default.func.start,{data:(0,r.default)({},n.default.data,{hidden:!0,tableOperate:\"\\u9009\\u62e9\",purchaseList:[],tableParam2:{size:100,now:1,total:0},tableOperate2:\"\\u5220\\u9664\",tableOperate3:\"\\u7f16\\u8f91\",ifedit:!1,good:{},goods:[],addPeopleNodes:[2],totalPrice:0,tableItems:[{prop:\"fNumber\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"fQty\",label:\"\\u5b9e\\u6536\\u6570\\u91cf\",width:200},{prop:\"fName\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"fModel\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"unitName\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"fFullName\",label:\"\\u4f9b\\u5e94\\u5546\",width:300}],tableItems2:[{prop:\"fNumber\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"fQty\",label:\"\\u5b9e\\u6536\\u6570\\u91cf\",width:200},{prop:\"fName\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"fModel\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"unitName\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"fFullName\",label:\"\\u4f9b\\u5e94\\u5546\",width:300}]}),search:function(t){dd.showLoading({content:\"\\u83b7\\u53d6\\u4e2d...\"});var e=t.detail.value;if(console.log(e.keyWord),e&&e.keyWord){var a=this,i=this.data.jinDomarn+\"Godown/ReadGodownInfoSingle\"+a.formatQueryStr({keyWord:e.keyWord});dd.httpRequest({url:i,method:\"GET\",success:function(t){dd.hideLoading(),console.log(i),console.log(t.data.data),0==t.data.data.length&&dd.showToast({content:\"\\u6682\\u65e0\\u6570\\u636e\"}),a.setData({\"tableParam.total\":t.data.data.length}),a.data.data=t.data.data,a.getData()},fail:function(t){dd.alert({content:JSON.stringify(t)})}})}},searchByNo:function(t){dd.showLoading({content:\"\\u83b7\\u53d6\\u4e2d...\"});var e=t.detail.value;if(console.log(e.no),e&&e.no){var a=this,i=this.data.jinDomarn+\"Godown/GetGodownInfoByFBillNo\"+a.formatQueryStr({FBillNo:e.no});dd.httpRequest({url:i,method:\"GET\",success:function(t){dd.hideLoading(),console.log(i),console.log(t.data.data),0==t.data.data.length&&dd.showToast({content:\"\\u6682\\u65e0\\u6570\\u636e\"}),a.setData({\"tableParam.total\":t.data.data.length}),a.data.data=t.data.data,a.getData()},fail:function(t){dd.alert({content:JSON.stringify(t)})}})}},searchAndAdd:function(t){dd.showLoading({content:\"\\u83b7\\u53d6\\u4e2d...\"});var e=t.detail.value;if(console.log(e.keyWord),e&&e.keyWord){var a=this,r=this.data.jinDomarn+\"Godown/ReadGodownInfo\"+a.formatQueryStr({UnitName:e.keyWord});dd.httpRequest({url:r,method:\"GET\",success:function(t){dd.hideLoading(),console.log(r),console.log(t.data.data),0==t.data.data.length&&dd.showToast({content:\"\\u6682\\u65e0\\u6570\\u636e\"});var e=[],o=a.data.purchaseList.length,n=!0,l=!1,d=void 0;try{for(var s,u=t.data.data[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var c=s.value,f=!1,h=!0,p=!1,g=void 0;try{for(var m,b=a.data.purchaseList[Symbol.iterator]();!(h=(m=b.next()).done);h=!0){var v=m.value;c.fNumber==v.fNumber&&(f=!0)}}catch(t){p=!0,g=t}finally{try{!h&&b.return&&b.return()}finally{if(p)throw g}}if(f)break;a.data.goods.push(c),e.push(c)}}catch(t){l=!0,d=t}finally{try{!n&&u.return&&u.return()}finally{if(l)throw d}}for(var y=0;y<e.length;y++)a.setData((0,i.default)({},\"purchaseList[\"+(o+y)+\"]\",e[y]))},fail:function(t){dd.alert({content:JSON.stringify(t)})}})}},submit:function(t){var e=[],a=!0,i=!1,r=void 0;try{for(var o,n=this.data.purchaseList[Symbol.iterator]();!(a=(o=n.next()).done);a=!0){var l=o.value;e.push(l.fFullName)}}catch(t){i=!0,r=t}finally{try{!a&&n.return&&n.return()}finally{if(i)throw r}}new Set(e);var d=this,s=t.detail.value,u={Title:s.title,Remark:s.remark,ProjectName:d.data.projectList[d.data.projectIndex].ProjectName,ProjectId:d.data.projectList[d.data.projectIndex].ProjectId};console.log(u),this.approvalSubmit(u,function(t){console.log(\"\\u63d0\\u4ea4\\u5ba1\\u6279ok!\"),d.bindAll(t)})},bindAll:function(t){var e=this,a=[],i=!0,r=!1,o=void 0;try{for(var n,l=e.data.purchaseList[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;d.TaskId=t,a.push(d)}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}e._postData(\"Godown/Save\",function(t){e.doneSubmit()},a)},bindPickerChange:function(t){this.data.nodeList[2].AddPeople=[{name:this.data.projectList[t.detail.value].ResponsibleMan,userId:this.data.projectList[t.detail.value].ResponsibleManId}],this.setData({projectIndex:t.detail.value,nodeList:this.data.nodeList})},chooseItem:function(t){t&&(console.log(t),(d=t.target.targetDataset.row)&&(this.setData({hidden:!this.data.hidden,ifedit:!1}),this.createMaskShowAnim(),this.createContentShowAnim()))},deleteItem:function(t){if(t){console.log(t);var e=t.target.targetDataset.index;if(e||0==e)if(t.target.targetDataset.opt2){if(!(d=t.target.targetDataset.row))return;this.setData({hidden:!this.data.hidden,ifedit:!0}),this.createMaskShowAnim(),this.createContentShowAnim()}else console.log(this.data.purchaseList),this.data.purchaseList.splice(e,1),this.setData({purchaseList:this.data.purchaseList}),console.log(this.data.purchaseList)}},addGood:function(t){var e=t.detail.value;if(console.log(e),e&&e.fQty){if(this.data.ifedit)for(var a=0;a<this.data.purchaseList.length;a++){var r=!0,o=!1,n=void 0;try{for(var l,s=this.data.goods[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;if(this.data.purchaseList[a].fNumber==u.fNumber&&e.fQty>u.fQty)return void dd.alert({content:\"\\u5927\\u4e8e\\u53ef\\u7528\\u6570\\u91cf\"})}}catch(t){o=!0,n=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw n}}this.data.purchaseList[a].fNumber==d.fNumber&&(d.fQty=e.fQty?e.fQty+\"\":\"1\",this.setData((0,i.default)({},\"purchaseList[\"+a+\"]\",d)))}else{var c=!0,f=!1,h=void 0;try{for(var p,g=this.data.purchaseList[Symbol.iterator]();!(c=(p=g.next()).done);c=!0){if(p.value.fNumber==d.fNumber)return void dd.alert({content:\"\\u91cd\\u590d\\u63d0\\u4ea4\"})}}catch(t){f=!0,h=t}finally{try{!c&&g.return&&g.return()}finally{if(f)throw h}}if(e.fQty>d.fQty)return void dd.alert({content:\"\\u5927\\u4e8e\\u53ef\\u7528\\u6570\\u91cf\"});var m={fNumber:d.fNumber,fName:d.fName,fModel:d.fModel,unitName:d.unitName,fQty:e.fQty?e.fQty+\"\":\"1\",fPrice:d.fPrice?d.fPrice+\"\":\"0\",fAmount:d.fAmount?d.fAmount+\"\":\"0\",fFullName:d.fFullName},b=this.data.purchaseList.length;this.setData((0,i.default)({},\"purchaseList[\"+b+\"]\",m)),m.fQty=d.fQty,this.data.goods.push(m)}this.onModalCloseTap()}else dd.alert({content:\"\\u8868\\u5355\\u586b\\u5199\\u4e0d\\u5b8c\\u6574\"})},onModalCloseTap:function(){var t=this;this.createMaskHideAnim(),this.createContentHideAnim(),setTimeout(function(){t.setData({hidden:!0})},210)},saveTempData:function(){localStorage.setItem(\"purchase\",JSON.stringify(this.data.purchaseList)),dd.alert({content:\"\\u4fdd\\u5b58\\u6210\\u529f\"})},loadTempData:function(){var t=JSON.parse(localStorage.getItem(\"purchase\"));t&&t.length&&t.length>0&&(this.setData({purchaseList:t}),localStorage.removeItem(\"purchase\"))},onShow:function(){}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/intoStorage/intoStorage\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{hidden:!0,totalPrice:\"0\",tableItems:[{prop:\"fNumber\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"fName\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"fModel\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"unitName\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"fPrice\",label:\"\\u5355\\u4ef7\",width:200},{prop:\"fQty\",label:\"\\u5b9e\\u6536\\u6570\\u91cf\",width:200},{prop:\"fAmount\",label:\"\\u91d1\\u989d\",width:200},{prop:\"fFullName\",label:\"\\u4f9b\\u5e94\\u5546\",width:300}]}),submit:function(t){var e=t.detail.value,a={Title:e.title,Remark:e.remark};console.log(t),this.aggreSubmit(a)},print:function(){this._postData(\"Godown/PrintPDF\",function(t){console.log(t),dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid})},output:function(){this._postData(\"Godown/PrintExcel\",function(t){console.log(t),dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"util/errorPage/errorPage\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}},(0,r.Page)((0,i.default)({},o.default.func,{data:(0,i.default)({},o.default.data,{tableParam:{size:15,now:1,total:0},tableItems:[{prop:\"ApplyMan\",label:\"\\u7533\\u8bf7\\u4eba\",width:200},{prop:\"ApplyManId\",label:\"\\u7533\\u8bf7\\u4ebaid\",width:300},{prop:\"ApplyTime\",label:\"\\u8c03\\u7528\\u65f6\\u95f4\",width:300},{prop:\"Url\",label:\"\\u63a5\\u53e3\\u8def\\u5f84\",width:400},{prop:\"ErrorCode\",label:\"\\u9519\\u8bef\\u7801\",width:100},{prop:\"ErrorMsg\",label:\"\\u9519\\u8bef\\u4fe1\\u606f\",width:400},{prop:\"Para\",label:\"\\u53c2\\u6570\",width:400},{prop:\"GetOrPost\",label:\"Method\\u7c7b\\u578b\",width:200}]}),onLoad:function(){var t=this;this.requestNofailData(\"POST\",\"ErrorLog/Read\",function(e){t.setData({data:e.data.data,\"tableParam.total\":e.data.data.length}),t.getData()})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/picking/picking\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{hidden:!0,totalPrice:\"0\",imgUrlList:[],tableItems:[{prop:\"fNumber\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"fName\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"fModel\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"unitName\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"fQty\",label:\"\\u5b9e\\u6536\\u6570\\u91cf\",width:200},{prop:\"fFullName\",label:\"\\u4f9b\\u5e94\\u5546\",width:300}]}),submit:function(t){var e=t.detail.value,a={Title:e.title,Remark:e.remark};this.data.imgUrlList.length>0&&(a.ImageUrl=this.data.imgUrlList.join(\",\")),console.log(a),this.aggreSubmit(a)},print:function(){this._postData(\"Pick/PrintPDF\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid})},output:function(){this._postData(\"Pick/PrintExcel\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/start/goOut/goOut\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.start,{data:(0,i.default)({},o.default.data,{placeArr:[],disablePage:!1}),submit:function(t){var e=this,a=t.detail.value;if(a.LocationPlace=\"\",a.Place=this.data.table.Place,console.log(a),a.Place&&a.BeginTime&&a.EndTime&&a.Content&&a.Duration){this.approvalSubmit(a,function(t){console.log(\"\\u63d0\\u4ea4\\u5ba1\\u6279ok!\"),a.TaskId=t,e._postData(\"Evection/Save\",function(t){e.doneSubmit()},a)},{Title:a.Title})}else dd.alert({content:\"\\u8868\\u5355\\u672a\\u586b\\u5199\\u5b8c\\u6574\"})},showInput:function(){this.setData({hidden:!this.data.hidden}),this.createMaskShowAnim(),this.createContentShowAnim()},addPlace:function(t){var e=t.detail.value;console.log(e),e&&e.place?(this.data.placeArr.push(e.place),this.setData({\"table.Place\":this.data.placeArr.join(\"-\")}),this.onModalCloseTap()):dd.alert({content:\"\\u8868\\u5355\\u586b\\u5199\\u4e0d\\u5b8c\\u6574\"})},loadReApproval:function(){var t=this.data.localStorage;t&&t.valid&&(t.valid=!1,this.setData({table:t.table,\"tableInfo.Title\":t.title,flowid:t.flowid,localStorage:t}))},upLoadFile:function(t){console.log(t),dd.uploadFile({url:\"/drawingupload/UploadAndGetInfo\",fileType:\"image\",fileName:\"file\",filePath:\"...\",success:function(t){dd.alert({content:\"\\u4e0a\\u4f20\\u6210\\u529f\"})}})},removePlace:function(){this.data.placeArr.pop(),this.setData({\"table.Place\":this.data.placeArr.join(\"-\")})},choosePeoples:function(t){t.target.targetDataset.NodeId;var e=this;dd.complexChoose((0,i.default)({},e.chooseParam,{multiple:!0,success:function(t){console.log(t);var a=[],i=[],r=!0,o=!1,n=void 0;try{for(var l,d=t.users[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var s=l.value;a.push(s.name),i.push(s.userId)}}catch(t){o=!0,n=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw n}}e.setData({\"table.EvectionMan\":a.join(\",\"),\"table.EvectionManId\":i.join(\",\")})},fail:function(t){}}))},selectStartDateTime:function(){var t=this;dd.datePicker({format:\"yyyy-MM-dd HH:mm\",currentDate:this.data.DateStr+\" \"+this.data.TimeStr,startDate:this.data.DateStr+\" \"+this.data.TimeStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day+\" \"+this.data.TimeStr,success:function(e){t.data.endDateStr&&t.setData({\"table.Duration\":t._computeDurTime(new Date(e.date.replace(/-/g,\"/\")),new Date(t.data.endDateStr.replace(/-/g,\"/\")),\"h\")}),t.setData({\"table.BeginTime\":e.date})}})},selectEndDateTime:function(){var t=this;dd.datePicker({format:\"yyyy-MM-dd HH:mm\",currentDate:this.data.DateStr+\" \"+this.data.TimeStr,startDate:this.data.DateStr+\" \"+this.data.TimeStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day+\" \"+this.data.TimeStr,success:function(e){t.data.startDateStr&&t.setData({\"table.Duration\":t._computeDurTime(new Date(t.data.startDateStr.replace(/-/g,\"/\")),new Date(e.date.replace(/-/g,\"/\")),\"h\")}),t.setData({\"table.EndTime\":e.date})}})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/goOut/goOut\",usingComponents:{}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{placeArr:[],planLength:0,imgUrlList:[],locationLength:0,table:{}}),submit:function(t){var e=this,a=t.detail.value,i={Title:a.title,Remark:a.remark,ImageUrl:this.data.tableInfo.ImageUrl};2==this.data.nodeid&&this.data.tableInfo.ImageUrl.split(\",\").length<this.data.planLength?dd.alert({content:\"\\u5b9a\\u4f4d\\u7167\\u7247\\u6570\\u5c0f\\u4e8e\\u8ba1\\u5212\\u5916\\u51fa\\u5730\\u70b9\\u6570\"}):(this.setData({disablePage:!0}),this._postData(\"Evection/Modify\",function(t){e.aggreSubmit(i)},this.data.table))},reApproval:function(){this.data.localStorage=JSON.stringify({valid:!0,flowid:this.data.flowid,title:this.data.tableInfo.Title,table:this.data.table});var t=!0,e=!1,a=void 0;try{for(var i,r=this.data.menu[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;o.flowId==this.data.flowid&&dd.redirectTo({url:\"/page/start/\"+o.url+\"?flowid=\"+o.flowId})}}catch(t){e=!0,a=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw a}}},addPlace:function(){var t=this;dd.chooseImage({count:1,sourceType:[\"camera\"],success:function(e){var a=!0,i=!1,r=void 0;try{for(var o,n=e.apFilePaths[Symbol.iterator]();!(a=(o=n.next()).done);a=!0){var l=o.value;t.setData({disablePage:!0}),dd.showLoading({content:\"\\u56fe\\u7247\\u5904\\u7406\\u4e2d...\"}),dd.uploadFile({url:t.data.dormainName+\"drawingupload/Upload?IsWaterMark=true\",fileType:\"image\",fileName:l.substring(7),IsWaterMark:!0,filePath:l,success:function(e){t.data.tableInfo.ImageUrl?t.data.tableInfo.ImageUrl+=\",\":t.data.tableInfo.ImageUrl=\"\",t.data.tableInfo.ImageUrl+=JSON.parse(e.data).Content,t._postData(\"FlowInfoNew/TaskModify\",function(e){t.getFormData(),t.setData({disablePage:!1}),dd.hideLoading()},t.data.tableInfo)},fail:function(t){dd.alert({content:\"sorry\"+JSON.stringify(t)})}})}}catch(t){i=!0,r=t}finally{try{!a&&n.return&&n.return()}finally{if(i)throw r}}}})},removePlace:function(){this.data.placeArr.length!=this.data.locationLength&&(this.data.placeArr.pop(),this.setData({\"table.LocationPlace\":this.data.placeArr.join(\"-\")}))},savePlace:function(){this._postData(\"Evection/Modify\",function(t){dd.alert({title:\"\\u4fdd\\u5b58\\u6210\\u529f\"})},this.data.table)},onReady:function(){var t=this;this._getData(\"Evection/Read\"+this.formatQueryStr({TaskId:this.data.taskid}),function(e){console.error(e),t.setData({table:e})})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/start/createProject/createProject\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.start,{data:(0,i.default)({},o.default.data,{stateIndex:0,companyIndex:0,deptIndex:0,typeIndex:0,disablePage:!0}),submit:function(t){var e=this,a=t.detail.value;if(a.CreateTime=\"\",a.CompanyName=\"\\u6cc9\\u5dde\\u534e\\u4e2d\\u79d1\\u6280\\u5927\\u5b66\\u667a\\u80fd\\u5236\\u9020\\u7814\\u7a76\\u9662\",a.ApplyManId=this.data.DingData.userid,a.ResponsibleManId=this.data.tableInfo.ResponsibleManId,a.TeamMembersId=this.data.tableInfo.TeamMembersId,a.ResponsibleMan&&a.groupPeople&&a.StartTime&&a.EndTime){this.approvalSubmit(a,function(t){console.log(\"\\u63d0\\u4ea4\\u5ba1\\u6279ok!\"),a.TaskId=t,e._postData(\"CarTableNew/TableSave\",function(t){e.doneSubmit()},a)})}else dd.alert({content:\"\\u8868\\u5355\\u672a\\u586b\\u5199\\u5b8c\\u6574\"})},chooseMan:function(t){var e=this;dd.complexChoose((0,i.default)({},e.chooseParam,{multiple:!1,success:function(t){console.log(t);var a=[],i=[],r=!0,o=!1,n=void 0;try{for(var l,d=t.users[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var s=l.value;a.push(s.name),i.push(s.userId)}}catch(t){o=!0,n=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw n}}e.setData({\"tableInfo.ResponsibleMan\":a.join(\",\"),\"tableInfo.ResponsibleManId\":i.join(\",\")})}}))},chooseMans:function(t){var e=this;dd.complexChoose((0,i.default)({},e.chooseParam,{multiple:!0,success:function(t){console.log(t);var a=[],i=[],r=!0,o=!1,n=void 0;try{for(var l,d=t.users[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var s=l.value;a.push(s.name),i.push(s.userId)}}catch(t){o=!0,n=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw n}}e.setData({\"tableInfo.TeamMembers\":a.join(\",\"),\"tableInfo.TeamMembersId\":i.join(\",\")})}}))},changeState:function(t){this.setData({stateIndex:t.detail.value})},changeCompany:function(t){this.setData({companyIndex:t.detail.value})},changeDept:function(t){this.setData({deptIndex:t.detail.value})},changeType:function(t){this.setData({typeIndex:t.detail.value})},upLoadFile:function(t){console.log(t)}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/createProject/createProject\",usingComponents:{}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{IsReview:!0,copyMans:[],table:{}}),submit:function(t){var e=this,a=t.detail.value,i={Remark:a.remark};if(this.data.table.IsReview=this.data.IsReview,this.data.table.ProjectId=a.ProjectId,3==this.data.nodeid||2==this.data.nodeid){if(3==this.data.nodeid&&!this.data.table.ProjectId)return console.log(this.data.table),void dd.alert({content:\"\\u9879\\u76ee\\u7f16\\u53f7\\u4e0d\\u80fd\\u4e3a\\u7a7a\"});console.log(this.data.nodeList),this.setData({disablePage:!0}),this._postData(\"CreateProject/Modify\",function(t){3==e.data.nodeid?e.requestData(\"POST\",\"Project/AddProject?IsPower=true\",function(t){e.aggreSubmit(i)},e.data.table):e.aggreSubmit(i)},this.data.table)}else this.aggreSubmit(i)},downloadServerFile:function(t){dd.downloadFile({url:t.target.dataset.url,success:function(t){var e=t.filePath;dd.previewImage({urls:[e]})},fail:function(t){dd.alert({content:t.errorMessage||t.error})}})},print:function(){this._postData(\"CreateProject/GetPrintPDF\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\\uff0c\\u8bf7\\u5728\\u9489\\u9489PC\\u7aef\\u67e5\\u6536\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid,IsPublic:!0})},radioChange:function(t){this.data.IsReview=t.detail.value},onReady:function(){var t=this;this._getData(\"CreateProject/Read\"+this.formatQueryStr({TaskId:this.data.taskid}),function(e){t.setData({table:e})})}}))},function(t,e,a){\"use strict\";var i=l(a(3)),r=l(a(1)),o=a(0),n=l(a(2));function l(t){return t&&t.__esModule?t:{default:t}}o.bridge,o.bridge;o.$global.currentPageConfig={pagePath:\"page/start/officeSupplies/officeSupplies\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}};var d={};(0,o.Page)((0,r.default)({},n.default.func,n.default.func.start,{data:(0,r.default)({},n.default.data,{hidden:!0,tableOperate:\"\\u9009\\u62e9\",purchaseList:[],tableParam2:{size:100,now:1,total:0},good:{},totalPrice:0,tableItems:[{prop:\"fNumber\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"fName\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"fModel\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"unitName\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"fNote\",label:\"\\u9884\\u8ba1\\u5355\\u4ef7\",width:100}],tableItems2:[{prop:\"CodeNo\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"Name\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"Standard\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"Unit\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"ExpectPrice\",label:\"\\u9884\\u8ba1\\u5355\\u4ef7\",width:100},{prop:\"Count\",label:\"\\u6570\\u91cf\",width:100},{prop:\"Purpose\",label:\"\\u7528\\u9014\",width:300},{prop:\"Mark\",label:\"\\u5907\\u6ce8\",width:300}]}),search:function(t){var e=this,a=t.detail.value;if(console.log(this.data.chooseParam),console.log(a),a&&a.keyWord){var i=e.data.jinDomarn+\"OfficeSupply/GetOfficeInfo\"+e.formatQueryStr({Key:a.keyWord});dd.httpRequest({url:i,method:\"GET\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded; charset=utf-8\"},success:function(t){var a=t.data.data;console.log(i),console.log(a),e.setData({\"tableParam.total\":a.length}),e.data.data=a,e.getData()},fail:function(t){\"{}\"!=JSON.stringify(t)&&dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25-\"+i+\"\\u62a5\\u9519:\"+JSON.stringify(t)})}})}},submit:function(t){var e=this,a=t.detail.value,i={Title:a.title,Remark:a.remark};if(e.data.purchaseList.length){console.log(i),this.approvalSubmit(i,function(t){e.bindAll(t)})}else dd.alert({content:\"\\u8bf7\\u9009\\u62e9\\u529e\\u516c\\u7528\\u54c1\"})},bindAll:function(t){var e=this,a=[],i=!0,r=!1,o=void 0;try{for(var n,l=e.data.purchaseList[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;d.TaskId=t,a.push(d)}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}e.requestJsonData(\"POST\",\"OfficeSupplies/SaveTable\",function(t){e.doneSubmit()},JSON.stringify(a))},chooseItem:function(t){t&&(console.log(t),(d=t.target.targetDataset.row)&&(this.setData({hidden:!this.data.hidden}),this.createMaskShowAnim(),this.createContentShowAnim()))},deleteItem:function(t){if(t){console.log(t);var e=t.target.targetDataset.index;(e||0==e)&&(console.log(this.data.purchaseList),this.data.purchaseList.splice(e,1),this.setData({purchaseList:this.data.purchaseList}),console.log(this.data.purchaseList))}},selectDate:function(){var t=this;dd.datePicker({currentDate:this.data.DateStr,startDate:this.data.DateStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day,success:function(e){t.setData({dateStr:e.date})}})},addGood:function(t){var e,a=t.detail.value;console.log(a);var r=!0,o=!1,n=void 0;try{for(var l,s=this.data.purchaseList[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){if(l.value.CodeNo==d.FNumber)return}}catch(t){o=!0,n=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw n}}if(a&&a.Count){var u={CodeNo:d.fNumber,Name:d.fName,Standard:d.fModel,Unit:d.unitName,ExpectPrice:d.fNote,Count:a.Count,Purpose:a.Purpose,Mark:a.Mark},c=this.data.purchaseList.length;this.setData((e={},(0,i.default)(e,\"purchaseList[\"+c+\"]\",u),(0,i.default)(e,\"totalPrice\",this.data.totalPrice+u.Price*u.Count+\"\"),e)),console.log(u.Purpose),this.onModalCloseTap()}else dd.alert({content:\"\\u8868\\u5355\\u586b\\u5199\\u4e0d\\u5b8c\\u6574\"})},saveTempData:function(){localStorage.setItem(\"purchase\",JSON.stringify(this.data.purchaseList)),dd.alert({content:\"\\u4fdd\\u5b58\\u6210\\u529f\"})},loadTempData:function(){var t=JSON.parse(localStorage.getItem(\"purchase\"));t&&t.length&&t.length>0&&(this.setData({purchaseList:t}),localStorage.removeItem(\"purchase\"))},onShow:function(){}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/officeSupplies/officeSupplies\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{hidden:!0,tableItems:[{prop:\"CodeNo\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"Name\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"Standard\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"Unit\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"Count\",label:\"\\u6570\\u91cf\",width:100},{prop:\"Purpose\",label:\"\\u7528\\u9014\",width:300},{prop:\"Mark\",label:\"\\u5907\\u6ce8\",width:300}]}),submit:function(t){var e=t.detail.value,a={Title:e.title,Remark:e.remark};this.aggreSubmit(a)}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/meterieCode/meterieCode\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}};var l={};(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{tableOperate:\"\\u7f16\\u8f91\",codeType:\"1\",good:{},hidden2:!0,tableItems:[{prop:\"Name\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"CodeNumber\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"Standard\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"BigCode\",label:\"\\u7269\\u6599\\u5927\\u7c7b\\u7f16\\u7801\",width:100},{prop:\"SmallCode\",label:\"\\u7269\\u6599\\u5c0f\\u7c7b\\u7f16\\u7801\",width:100},{prop:\"Unit\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"SurfaceTreatment\",label:\"\\u8868\\u9762\\u5904\\u7406\",width:300},{prop:\"PerformanceLevel\",label:\"\\u6027\\u80fd\\u7b49\\u7ea7\",width:100},{prop:\"StandardNumber\",label:\"\\u6807\\u51c6\\u53f7\",width:100},{prop:\"Features\",label:\"\\u5178\\u578b\\u7279\\u5f81\",width:300},{prop:\"purpose\",label:\"\\u7528\\u9014\",width:300},{prop:\"Remark\",label:\"\\u5907\\u6ce8\",width:100},{prop:\"FNote\",label:\"\\u9884\\u8ba1\\u4ef7\\u683c\",width:100}]}),submit:function(t){var e=this,a=t.detail.value,i={Title:a.title,Remark:a.remark};if(2!=this.data.nodeid)this.aggreSubmit(i);else{var r=!0,o=!1,n=void 0;try{for(var l,d=this.data.tableData[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){if(!l.value.CodeNumber)return void dd.alert({content:\"\\u60a8\\u8fd8\\u6709\\u7269\\u6599\\u7f16\\u7801\\u672a\\u586b\"})}}catch(t){o=!0,n=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw n}}this.requestJsonData(\"POST\",\"ItemCodeAdd/TableModify\",function(t){var a=\"/ItemCodeAdd/InsertPurcahse\";\"2\"==e.data.codeType&&(a=\"/ItemCodeAdd/InsertOffice\"),e.requestJsonData(\"POST\",a,function(t){e.aggreSubmit(i)},JSON.stringify(e.data.tableData))},JSON.stringify(this.data.tableData))}},addGood:function(t){var e=t.detail.value;if(console.log(e),e&&e.CodeNumber){var a=!0,i=!1,r=void 0;try{for(var o,n=this.data.tableData[Symbol.iterator]();!(a=(o=n.next()).done);a=!0){var d=o.value;d.Name==l.Name&&(d.CodeNumber=e.CodeNumber,d.FNote=e.FNote)}}catch(t){i=!0,r=t}finally{try{!a&&n.return&&n.return()}finally{if(i)throw r}}console.log(this.data.tableData),this.setData({tableData:this.data.tableData}),this.onModalCloseTap2()}else dd.alert({content:\"\\u8868\\u5355\\u586b\\u5199\\u4e0d\\u5b8c\\u6574\"})},radioChange:function(t){this.data.codeType=t.detail.codeType},onModalCloseTap2:function(){var t=this;this.createMaskHideAnim(),this.createContentHideAnim(),setTimeout(function(){t.setData({hidden2:!0})},210)},chooseItem:function(t){t&&(console.log(t),(l=t.target.targetDataset.row)&&(this.setData({hidden2:!this.data.hidden2}),this.createMaskShowAnim(),this.createContentShowAnim()))}}))},function(t,e,a){\"use strict\";var i=l(a(3)),r=l(a(1)),o=a(0),n=l(a(2));function l(t){return t&&t.__esModule?t:{default:t}}o.bridge,o.bridge;o.$global.currentPageConfig={pagePath:\"page/start/meterieCode/meterieCode\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}},(0,o.Page)((0,r.default)({},n.default.func,n.default.func.start,{data:(0,r.default)({},n.default.data,{hidden:!0,tableOperate:\"\\u5220\\u9664\",tableData:[],good:{},bigIndex:-1,smallIndex:-1,bigCodes:[{materialCodeNumber:1,materialName:\"\"}],bigCodes2:[{materialCodeNumber:\"60\",materialName:\"\\u529e\\u516c\\u7528\\u54c1\",smallMaterialCodes:[{materialCodeNumber:\"000\",materialName:\"\\u6587\\u4ef6\\u6863\\u6848\\u7ba1\\u7406\\u7c7b\"},{materialCodeNumber:\"001\",materialName:\"\\u684c\\u9762\\u7528\\u54c1\"},{materialCodeNumber:\"002\",materialName:\"\\u529e\\u516c\\u672c\\u8584\"},{materialCodeNumber:\"003\",materialName:\"\\u4e66\\u5199\\u4fee\\u6b63\\u7528\\u54c1\"},{materialCodeNumber:\"004\",materialName:\"\\u8d22\\u52a1\\u7528\\u54c1\"},{materialCodeNumber:\"005\",materialName:\"\\u8f85\\u52a9\\u7528\\u54c1\"},{materialCodeNumber:\"006\",materialName:\"\\u7535\\u8111\\u5468\\u8fb9\\u7528\\u54c1\"},{materialCodeNumber:\"040\",materialName:\"\\u6253\\u5370\\u8017\\u6750\"},{materialCodeNumber:\"041\",materialName:\"\\u88c5\\u8ba2\\u8017\\u6750\"},{materialCodeNumber:\"042\",materialName:\"\\u529e\\u516c\\u7528\\u7eb8\"},{materialCodeNumber:\"043\",materialName:\"IT\\u8017\\u6750\"},{materialCodeNumber:\"080\",materialName:\"\\u65e5\\u7528\\u54c1\"},{materialCodeNumber:\"081\",materialName:\"\\u6e05\\u6d01\\u7528\\u54c1\"},{materialCodeNumber:\"120\",materialName:\"\\u4e8b\\u52a1\\u8bbe\\u5907\"},{materialCodeNumber:\"121\",materialName:\"IT\\u8bbe\\u5907\"},{materialCodeNumber:\"122\",materialName:\"\\u529e\\u516c\\u7535\\u5668\"},{materialCodeNumber:\"160\",materialName:\"\\u529e\\u516c\\u5bb6\\u5177\"}]}],smallMaterialCodes:[],codeType:\"1\",tableItems:[{prop:\"Name\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"BigCodeName\",label:\"\\u5927\\u7c7b\\u540d\\u79f0\",width:200},{prop:\"BigCode\",label:\"\\u5927\\u7c7b\\u7f16\\u7801\",width:200},{prop:\"SmallCodeName\",label:\"\\u5c0f\\u7c7b\\u540d\\u79f0\",width:200},{prop:\"SmallCode\",label:\"\\u5c0f\\u7c7b\\u7f16\\u7801\",width:200},{prop:\"Standard\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"Unit\",label:\"\\u5355\\u4f4d\",width:200},{prop:\"SurfaceTreatment\",label:\"\\u8868\\u9762\\u5904\\u7406\",width:200},{prop:\"PerformanceLevel\",label:\"\\u6027\\u80fd\\u7b49\\u7ea7\",width:200},{prop:\"StandardNumber\",label:\"\\u6807\\u51c6\\u53f7\",width:200},{prop:\"Features\",label:\"\\u5178\\u578b\\u7279\\u5f81\",width:200},{prop:\"purpose\",label:\"\\u7528\\u9014\",width:200},{prop:\"Remark\",label:\"\\u5907\\u6ce8\",width:100}]}),submit:function(t){var e=this,a=t.detail.value,i={Title:a.title,Remark:a.remark};console.log(i),this.approvalSubmit(i,function(t){e.bindAll(t)})},bindAll:function(t){var e=this,a=[],i=!0,r=!1,o=void 0;try{for(var n,l=e.data.tableData[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;d.TaskId=t,a.push(d)}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}e.requestJsonData(\"POST\",\"ItemCodeAdd/TableSave\",function(t){e.doneSubmit()},JSON.stringify(a))},radioChange:function(t){this.setData({tableData:[]}),this.data.codeType=t.detail.value,this.getMaterielCode()},getMaterielCode:function(){var t=this,e=\"\";console.log(this.data.codeType),console.log(this.data.bigCodes),\"2\"==this.data.codeType?this.setData({bigCodes:this.data.bigCodes2}):\"1\"==this.data.codeType&&(e=\"/ItemCodeAdd/GetAllMaterialCode\",this._getData(e,function(e){console.log(e),t.setData({bigCodes:e})}))},asd:function(){console.log(\"\\u53d1\\u751f\\u4e86\\u91cd\\u7f6e\")},changeBigCode:function(t){var e=t.detail.value;console.log(\"changeBigCode\"),console.log(this.data.codeType),e!=this.data.bigIndex&&this.setData({bigIndex:e,smallIndex:0,smallMaterialCodes:this.data.bigCodes[e].smallMaterialCodes})},changeSmallCode:function(t){console.log(\"changeSmallCode\");var e=t.detail.value;this.setData({smallIndex:e})},chooseItem:function(t){this.setData({hidden:!this.data.hidden}),this.createMaskShowAnim(),this.createContentShowAnim()},deleteItem:function(t){if(t){console.log(t);var e=t.target.targetDataset.index;(e||0==e)&&(console.log(this.data.tableData),this.data.tableData.splice(e,1),this.setData({tableData:this.data.tableData}),console.log(this.data.tableData))}},addGood:function(t){var e=t.detail.value;if(console.log(t),console.log(e),console.log(!e),console.log(!e.Name),console.log(!e.Standard),console.log(this.data.bigIndex),console.log(this.data.smallIndex),!e||!e.Name||!e.Standard||this.data.bigIndex<0||this.data.smallIndex<0)dd.alert({content:\"\\u8868\\u5355\\u586b\\u5199\\u4e0d\\u5b8c\\u6574\"});else{e.BigCodeName=this.data.bigCodes[this.data.bigIndex].materialName,e.BigCode=this.data.bigCodes[this.data.bigIndex].materialCodeNumber,e.SmallCodeName=this.data.smallMaterialCodes[this.data.smallIndex].materialName,e.SmallCode=this.data.smallMaterialCodes[this.data.smallIndex].materialCodeNumber,console.log(e);var a=this.data.tableData.length;this.setData((0,i.default)({},\"tableData[\"+a+\"]\",e))}},onShow:function(){this.getMaterielCode()}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/officePurchase/officePurchase\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{hidden:!0,dataList:[],deletedList:[],totalPrice:0,tableOperate:\"\\u5220\\u9664\",tableParam:{size:5e3,now:1,total:0},tableItems:[{prop:\"CodeNo\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"Name\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"Standard\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"Unit\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"Price\",label:\"\\u9884\\u8ba1\\u5355\\u4ef7\",width:100},{prop:\"Count\",label:\"\\u6570\\u91cf\",width:100},{prop:\"totalPrice\",label:\"\\u603b\\u4ef7\",width:200},{prop:\"Purpose\",label:\"\\u7528\\u9014\",width:300}]}),submit:function(t){var e=this,a=t.detail.value,i={Title:a.title,Remark:a.remark};if(2==this.data.nodeid){var r=[],o=!0,n=!1,l=void 0;try{for(var d,s=this.data.deletedList[Symbol.iterator]();!(o=(d=s.next()).done);o=!0){var u=d.value;u.IsDelete=!0,r.push(u)}}catch(t){n=!0,l=t}finally{try{!o&&s.return&&s.return()}finally{if(n)throw l}}var c=!0,f=!1,h=void 0;try{for(var p,g=this.data.dataList[Symbol.iterator]();!(c=(p=g.next()).done);c=!0){var m=p.value,b=!0,v=!1,y=void 0;try{for(var D,I=m.value[Symbol.iterator]();!(b=(D=I.next()).done);b=!0){var w=D.value;r.push(w)}}catch(t){v=!0,y=t}finally{try{!b&&I.return&&I.return()}finally{if(v)throw y}}}}catch(t){f=!0,h=t}finally{try{!c&&g.return&&g.return()}finally{if(f)throw h}}return console.log(r),void this._postData(\"OfficeSuppliesPurchase/ModifyTable\",function(t){e.aggreSubmit(i)},r)}this.aggreSubmit(i)},print:function(){this._postData(\"OfficeSuppliesPurchase/PrintPDF\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid})},deleteItem:function(t){if(t){var e=t.target.targetDataset.row,a=t.target.targetDataset.index;if(console.log(e),a||0==a){var i=!0,r=!1,o=void 0;try{for(var n,l=this.data.dataList[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;d.name==e.Dept&&(this.data.totalPrice-=parseInt(e.Price*e.Count),d.tmpTotalPrice-=parseInt(e.Price*e.Count),this.data.deletedList.push(d.value.splice(a,1)[0]))}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}this.setData({dataList:this.data.dataList}),console.log(this.data.dataList),console.log(this.data.deletedList)}}},getBomInfo:function(){var t=this;this.requestData(\"GET\",\"OfficeSuppliesPurchase/ReadTable?TaskId=\"+this.data.taskid,function(e){t.data.dataList=[];var a=[],i=\"\";e=JSON.parse(e.data);var r=!0,o=!1,n=void 0;try{for(var l,d=e[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var s=l.value;s.Dept&&i.indexOf(s.Dept)<0&&(i=i+s.Dept+\",\")}}catch(t){o=!0,n=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw n}}a=(i=i.substring(0,i.length-1)).split(\",\"),console.log(a);var u=!0,c=!1,f=void 0;try{for(var h,p=a[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var g=h.value;t.data.dataList.push({name:g,value:[],tmpTotalPrice:0})}}catch(t){c=!0,f=t}finally{try{!u&&p.return&&p.return()}finally{if(c)throw f}}var m=!0,b=!1,v=void 0;try{for(var y,D=e[Symbol.iterator]();!(m=(y=D.next()).done);m=!0){var I=y.value,w=!0,S=!1,P=void 0;try{for(var k,C=t.data.dataList[Symbol.iterator]();!(w=(k=C.next()).done);w=!0){var T=k.value;if(I.Dept==T.name){I.totalPrice=parseInt(I.Price*I.Count),T.value.push(I),T.tmpTotalPrice+=parseInt(I.Price*I.Count),t.data.totalPrice+=parseInt(I.Price*I.Count);break}}}catch(t){S=!0,P=t}finally{try{!w&&C.return&&C.return()}finally{if(S)throw P}}}}catch(t){b=!0,v=t}finally{try{!m&&D.return&&D.return()}finally{if(b)throw v}}t.setData({dataList:t.data.dataList,totalPrice:t.data.totalPrice})})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/crossHelp/crossHelp\",usingComponents:{}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{table:{}}),submit:function(t){var e=this,a=t.detail.value,i={Remark:a.remark};a.FactBeginTime&&a.FactEndTime&&a.FactDays&&a.FactCooperateContent&&a.FactCooperateMan||4!=this.data.nodeid?(4==this.data.nodeid&&(this.data.table.FactBeginTime=a.FactBeginTime,this.data.table.FactEndTime=a.FactEndTime,this.data.table.FactDays=a.FactDays,this.data.table.FactCooperateContent=a.FactCooperateContent),this.setData({disablePage:!0}),this._postData(\"Cooperate/Modify\",function(t){e.aggreSubmit(i)},this.data.table)):dd.alert({content:\"\\u8868\\u5355\\u672a\\u586b\\u5199\\u5b8c\\u6574\"})},choosePeoples:function(t){var e=this;dd.complexChoose((0,i.default)({},e.chooseParam,{multiple:!0,success:function(t){var a=[],i=[],r=!0,o=!1,n=void 0;try{for(var l,d=t.users[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var s=l.value;a.push(s.name),i.push(s.emplId)}}catch(t){o=!0,n=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw n}}e.setData({\"table.FactCooperateMan\":a.join(\",\"),\"table.FactCooperateManId\":i.join(\",\")})},fail:function(t){}}))},onReady:function(){var t=this;this._getData(\"Cooperate/Read\"+this.formatQueryStr({TaskId:this.data.taskid}),function(e){1==t.data.nodeid&&(e.FactBeginTime=e.PlanBeginTime,e.FactEndTime=e.PlanEndTime,e.FactDays=e.PlanDays,e.FactCooperateContent=e.CooperateContent,e.FactCooperateMan=e.CooperateMan),t.setData({table:e})})}}))},function(t,e,a){\"use strict\";var i=l(a(86)),r=l(a(1)),o=a(0),n=l(a(2));function l(t){return t&&t.__esModule?t:{default:t}}o.bridge,o.bridge;o.$global.currentPageConfig={pagePath:\"page/start/crossHelp/crossHelp\",usingComponents:{}},(0,o.Page)((0,r.default)({},n.default.func,n.default.func.start,{data:(0,r.default)({},n.default.data,{addPeopleNodes:[4,6]}),submit:function(t){var e=this,a=t.detail.value;if(a.CooperateDept=this.data.DeptNames[this.data.departIndex],console.log(a),a.CooperateDept&&a.CooperateMan&&a.PlanBeginTime&&a.PlanEndTime&&a.CooperateContent&&a.PlanDays){this.data.nodeList[4].AddPeople=this.data.nodeList[2].AddPeople,this.data.nodeList[6].AddPeople=[].concat((0,i.default)(this.data.nodeList[0].AddPeople),(0,i.default)(this.data.nodeList[1].AddPeople),(0,i.default)(this.data.nodeList[2].AddPeople)),this.approvalSubmit({Title:a.Title,Remark:a.remark},function(t){a.TaskId=t,e._postData(\"Cooperate/Save\",function(t){e.doneSubmit()},a)})}else dd.alert({content:\"\\u8868\\u5355\\u672a\\u586b\\u5199\\u5b8c\\u6574\"})},choosePeoples:function(t){var e=this;dd.complexChoose((0,r.default)({},e.chooseParam,{multiple:!0,success:function(t){var a=[],i=[],r=!0,o=!1,n=void 0;try{for(var l,d=t.users[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var s=l.value;a.push(s.name),i.push(s.userId)}}catch(t){o=!0,n=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw n}}e.setData({\"tableInfo.CooperateMan\":a.join(\",\"),\"tableInfo.CooperateManId\":i.join(\",\")})},fail:function(t){}}))}}))},function(t,e,a){\"use strict\";e.__esModule=!0;var i,r=a(87),o=(i=r)&&i.__esModule?i:{default:i};e.default=function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return(0,o.default)(t)}},function(t,e,a){t.exports={default:a(88),__esModule:!0}},function(t,e,a){a(89),a(98),t.exports=a(5).Array.from},function(t,e,a){\"use strict\";var i=a(90)(!0);a(91)(String,\"String\",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=i(e,a),this._i+=t.length,{value:t,done:!1})})},function(t,e,a){var i=a(17),r=a(16);t.exports=function(t){return function(e,a){var o,n,l=String(r(e)),d=i(a),s=l.length;return d<0||d>=s?t?\"\":void 0:(o=l.charCodeAt(d))<55296||o>56319||d+1===s||(n=l.charCodeAt(d+1))<56320||n>57343?t?l.charAt(d):o:t?l.slice(d,d+2):n-56320+(o-55296<<10)+65536}}},function(t,e,a){\"use strict\";var i=a(30),r=a(9),o=a(92),n=a(10),l=a(20),d=a(93),s=a(33),u=a(97),c=a(4)(\"iterator\"),f=!([].keys&&\"next\"in[].keys()),h=function(){return this};t.exports=function(t,e,a,p,g,m,b){d(a,e,p);var v,y,D,I=function(t){if(!f&&t in k)return k[t];switch(t){case\"keys\":case\"values\":return function(){return new a(this,t)}}return function(){return new a(this,t)}},w=e+\" Iterator\",S=\"values\"==g,P=!1,k=t.prototype,C=k[c]||k[\"@@iterator\"]||g&&k[g],T=C||I(g),N=g?S?I(\"entries\"):T:void 0,_=\"Array\"==e&&k.entries||C;if(_&&(D=u(_.call(new t)))!==Object.prototype&&D.next&&(s(D,w,!0),i||\"function\"==typeof D[c]||n(D,c,h)),S&&C&&\"values\"!==C.name&&(P=!0,T=function(){return C.call(this)}),i&&!b||!f&&!P&&k[c]||n(k,c,T),l[e]=T,l[w]=h,g)if(v={values:S?T:I(\"values\"),keys:m?T:I(\"keys\"),entries:N},b)for(y in v)y in k||o(k,y,v[y]);else r(r.P+r.F*(f||P),e,v);return v}},function(t,e,a){t.exports=a(10)},function(t,e,a){\"use strict\";var i=a(94),r=a(15),o=a(33),n={};a(10)(n,a(4)(\"iterator\"),function(){return this}),t.exports=function(t,e,a){t.prototype=i(n,{next:r(1,a)}),o(t,e+\" Iterator\")}},function(t,e,a){var i=a(11),r=a(95),o=a(32),n=a(18)(\"IE_PROTO\"),l=function(){},d=function(){var t,e=a(23)(\"iframe\"),i=o.length;for(e.style.display=\"none\",a(96).appendChild(e),e.src=\"javascript:\",(t=e.contentWindow.document).open(),t.write(\"<script>document.F=Object<\\/script>\"),t.close(),d=t.F;i--;)delete d.prototype[o[i]];return d()};t.exports=Object.create||function(t,e){var a;return null!==t?(l.prototype=i(t),a=new l,l.prototype=null,a[n]=t):a=d(),void 0===e?a:r(a,e)}},function(t,e,a){var i=a(7),r=a(11),o=a(24);t.exports=a(8)?Object.defineProperties:function(t,e){r(t);for(var a,n=o(e),l=n.length,d=0;l>d;)i.f(t,a=n[d++],e[a]);return t}},function(t,e,a){var i=a(6).document;t.exports=i&&i.documentElement},function(t,e,a){var i=a(12),r=a(19),o=a(18)(\"IE_PROTO\"),n=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:\"function\"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?n:null}},function(t,e,a){\"use strict\";var i=a(22),r=a(9),o=a(19),n=a(99),l=a(100),d=a(28),s=a(101),u=a(102);r(r.S+r.F*!a(104)(function(t){Array.from(t)}),\"Array\",{from:function(t){var e,a,r,c,f=o(t),h=\"function\"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,b=0,v=u(f);if(m&&(g=i(g,p>2?arguments[2]:void 0,2)),void 0==v||h==Array&&l(v))for(a=new h(e=d(f.length));e>b;b++)s(a,b,m?g(f[b],b):f[b]);else for(c=v.call(f),a=new h;!(r=c.next()).done;b++)s(a,b,m?n(c,g,[r.value,b],!0):r.value);return a.length=b,a}})},function(t,e,a){var i=a(11);t.exports=function(t,e,a,r){try{return r?e(i(a)[0],a[1]):e(a)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,a){var i=a(20),r=a(4)(\"iterator\"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,a){\"use strict\";var i=a(7),r=a(15);t.exports=function(t,e,a){e in t?i.f(t,e,r(0,a)):t[e]=a}},function(t,e,a){var i=a(103),r=a(4)(\"iterator\"),o=a(20);t.exports=a(5).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t[\"@@iterator\"]||o[i(t)]}},function(t,e,a){var i=a(27),r=a(4)(\"toStringTag\"),o=\"Arguments\"==i(function(){return arguments}());t.exports=function(t){var e,a,n;return void 0===t?\"Undefined\":null===t?\"Null\":\"string\"==typeof(a=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?a:o?i(e):\"Object\"==(n=i(e))&&\"function\"==typeof e.callee?\"Arguments\":n}},function(t,e,a){var i=a(4)(\"iterator\"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var a=!1;try{var o=[7],n=o[i]();n.next=function(){return{done:a=!0}},o[i]=function(){return n},t(o)}catch(t){}return a}},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/changePaper/changePaper\",usingComponents:{}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{hidden:!0,totalPrice:\"0\",tableItems:[{prop:\"ChangeType\",label:\"\\u64cd\\u4f5c\",width:100},{prop:\"Sorts\",label:\"\\u7c7b\\u522b\",width:100},{prop:\"DrawingNo\",label:\"\\u4ee3\\u53f7\",width:300},{prop:\"Name\",label:\"\\u540d\\u79f0\",width:300},{prop:\"Count\",label:\"\\u6570\\u91cf\",width:100},{prop:\"MaterialScience\",label:\"\\u6750\\u6599\",width:200},{prop:\"Unit\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"SingleWeight\",label:\"\\u5355\\u91cd\",width:100},{prop:\"AllWeight\",label:\"\\u603b\\u91cd\",width:100},{prop:\"NeedTime\",label:\"\\u9700\\u7528\\u65e5\\u671f\",width:200},{prop:\"Mark\",label:\"\\u5907\\u6ce8\",width:300}],imageList:[],fileList:[],pdfList:[]}),submit:function(t){var e=this,a={Remark:t.detail.value.remark};5!=this.data.nodeid?this.aggreSubmit(a):this._postData(\"DrawingChange/ChangeBom\",function(t){e.aggreSubmit(a)},this.data.tableData)},print:function(){this._postData(\"DrawingChange/PrintAndSend\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\\uff0c\\u8bf7\\u5728\\u9489\\u9489\\u5de5\\u4f5c\\u901a\\u77e5\\u4e2d\\u67e5\\u6536\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid,OldPath:this.data.FilePDFUrl.replace(/\\\\/g,\"\\\\\\\\\")})},output:function(){this._getData(\"NewsAndCases/GetAllPDF\"+this.formatQueryStr({ApplyManId:this.data.DingData.userid,taskId:this.data.taskid}),function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\\uff0c\\u8bf7\\u5728\\u9489\\u9489\\u5de5\\u4f5c\\u901a\\u77e5\\u4e2d\\u67e5\\u6536\"})})},setPdfState:function(t){var e=t.target.dataset.index;\"1\"==this.data.pdfList[e].state?this.data.pdfList[e].state=\"0\":this.data.pdfList[e].state=\"1\",this.setData({pdfList:this.data.pdfList});var a=[],i=!0,r=!1,o=void 0;try{for(var n,l=this.data.pdfList[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;a.push(d.state)}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}var s=\"FileNew/UpdatePDFState?TaskId=\"+this.data.taskid+\"&PDFState=\"+a.join(\",\");this._getData(s,function(t){})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/techonologySupply/techonologySupply\",usingComponents:{}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{addPeopleNodes:[],table:{},show:!0}),submit:function(t){var e=this,a=this,i=t.detail.value,r={Remark:i.remark};if(i.TeamMembers&&i.StartTime&&i.EndTime&&i.TechnicalProposal&&i.ProjectName||1!=this.data.nodeid){if(1==this.data.nodeid&&(this.data.table.TeamMembers=i.TeamMembers,this.data.table.StartTime=i.StartTime,this.data.table.EndTime=i.EndTime,this.data.table.TechnicalProposal=i.TechnicalProposal,this.data.table.ProjectName=i.ProjectName),4==this.data.nodeid){if(!i.ProjectNo)return void dd.alert({content:\"\\u8868\\u5355\\u672a\\u586b\\u5199\\u5b8c\\u6574\"});this.data.table.ProjectNo=i.ProjectNo,this.data.table.IsCreateProject=!0;var o={CreateTime:this._getTime(),IsEnable:!0,ProjectState:\"\\u5728\\u7814\",IsFinish:!1,ApplyMan:this.data.nodeInfo.NodePeople,ApplyManId:this.data.nodeInfo.PeopleId,StartTime:this.data.table.StartTime,EndTime:this.data.table.EndTime,TeamMembers:this.data.table.TeamMembers,TeamMembersId:this.data.table.TeamMembersId,ProjectName:this.data.table.ProjectName,ProjectId:i.ProjectNo,CompanyName:this.data.table.CompanyName,CooperativeUnit:this.data.table.Customer,DeptName:this.data.table.DeptName,ProjectType:this.data.table.ProjectType,ProjectSmallType:\"\\u6d4b\\u8bd5\",ResponsibleMan:this.data.table.ResponsibleMan,ResponsibleManId:this.data.table.ResponsibleManId,ProjectFileUrl:\"\"};return console.log(o),this.setData({disablePage:!0}),void this._postData(\"TechnicalSupport/Modify\",function(t){e._postData(\"ProjectNew/AddProject\",function(t){a.aggreSubmit(r)},[o])},this.data.table)}this.setData({disablePage:!0}),this._postData(\"TechnicalSupport/Modify\",function(t){a.aggreSubmit(r)},this.data.table)}else dd.alert({content:\"\\u8868\\u5355\\u672a\\u586b\\u5199\\u5b8c\\u6574\"})},print:function(){this._postData(\"TechnicalSupport/PrintAndSend\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\\uff0c\\u8bf7\\u5728\\u9489\\u9489\\u5de5\\u4f5c\\u901a\\u77e5\\u4e2d\\u67e5\\u6536\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid})},choosePeoples:function(t){this.data.addPeopleNodes=[5];var e=this;dd.complexChoose((0,i.default)({},e.chooseParam,{multiple:!0,success:function(t){var a=[],i=[],r=[],o=!0,n=!1,l=void 0;try{for(var d,s=t.users[Symbol.iterator]();!(o=(d=s.next()).done);o=!0){var u=d.value;a.push(u.name),i.push(u.userId),r.push({name:u.name,userId:u.userId})}}catch(t){n=!0,l=t}finally{try{!o&&s.return&&s.return()}finally{if(n)throw l}}e.setData({\"nodeList[5].AddPeople\":r,\"table.TeamMembers\":a.join(\",\"),\"table.TeamMembersId\":i.join(\",\")}),console.log(e.data.nodeList[5])},fail:function(t){}}))},onReady:function(){var t=this;this._getData(\"TechnicalSupport/Read\"+this.formatQueryStr({TaskId:this.data.taskid}),function(e){for(var a in e)null===e[a]&&(e[a]=\"\");t.setData({table:e})})},getNodeList_done:function(t){console.log(t);var e=!0,a=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var n=r.value;\"\\u6284\\u9001\"==n.NodeName&&-1!==n.NodePeople.indexOf(this.data.DingData.nickName)&&this.setData({show:!1})}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/start/letGoodsGo/letGoodsGo\",usingComponents:{}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.start,{data:(0,i.default)({},o.default.data,{companyIndex:0,imgUrlList:[],disablePage:!1}),submit:function(t){var e=this,a=t.detail.value;if(a.Company=this.data.CompanyNames[this.data.companyIndex],this.data.imgUrlList.length<1)dd.alert({content:\"\\u9700\\u8981\\u4e0a\\u4f20\\u56fe\\u7247\"});else if(a.Company&&a.Tel&&a.Name&&a.Count&&a.Unit&&a.Cause&&a.Date){a.ImageUrl=this.data.imgUrlList.join(\",\"),this.approvalSubmit(a,function(t){console.log(\"\\u63d0\\u4ea4\\u5ba1\\u6279ok!\"),a.TaskId=t,e._postData(\"MaterialRelease/Save\",function(t){e.doneSubmit()},a)})}else dd.alert({content:\"\\u8868\\u5355\\u672a\\u586b\\u5199\\u5b8c\\u6574\"})},changeCompany:function(t){this.setData({companyIndex:t.detail.value})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/letGoodsGo/letGoodsGo\",usingComponents:{}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{table:{}}),submit:function(t){var e={Remark:t.detail.value.remark};this.aggreSubmit(e)},print:function(){this._postData(\"MaterialRelease/PrintAndSend\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\\uff0c\\u8bf7\\u5728\\u9489\\u9489\\u5de5\\u4f5c\\u901a\\u77e5\\u4e2d\\u67e5\\u6536\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid})},onReady:function(){var t=this;this._getData(\"MaterialRelease/Read\"+this.formatQueryStr({TaskId:this.data.taskid}),function(e){for(var a in e)null===e[a]&&(e[a]=\"\");t.setData({table:e})})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/start/intellectualProperty/intellectualProperty\",usingComponents:{}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.start,{data:(0,i.default)({},o.default.data,{disablePage:!1,addPeopleNodes:[5],managers:[{name:\"\\u8a79\\u59c6\\u65af\",emplId:\"manager325\"},{name:\"\\u8521\\u5174\\u6850\",emplId:\"083452125733424957\"}]}),submit:function(t){var e=this,a=t.detail.value;if(a.Type=this.data.IntellectualPropertyTypes[this.data.iptIndex],a.Project=this.data.projectList[this.data.projectIndex].ProjectName,a.ProjectId=this.data.projectList[this.data.projectIndex].ProjectId,a.InventorId=this.data.tableInfo.InventorId,a.ActualInventor=this.data.tableInfo.ActualInventor,a.ActualInventorId=this.data.tableInfo.ActualInventorId,!a.Type||!a.ProjectId||!a.InventorId||!a.Name)return console.log(a),void dd.alert({content:\"\\u8868\\u5355\\u672a\\u586b\\u5199\\u5b8c\\u6574\"});\"\\u8f6f\\u4ef6\\u8457\\u4f5c\\u6743\"==a.Type?this.data.nodeList[5].AddPeople=[this.data.managers[1]]:this.data.nodeList[5].AddPeople=[this.data.managers[0]];this.approvalSubmit(a,function(t){console.log(\"\\u63d0\\u4ea4\\u5ba1\\u6279ok!\"),a.TaskId=t,e._postData(\"IntellectualProperty/Save\",function(t){e.doneSubmit()},a)})},chooseMans:function(t){var e=this;dd.complexChoose((0,i.default)({},e.chooseParam,{multiple:!0,success:function(t){console.log(t);var a=[],i=[],r=!0,o=!1,n=void 0;try{for(var l,d=t.users[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var s=l.value;a.push(s.name),i.push(s.userId)}}catch(t){o=!0,n=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw n}}e.setData({\"tableInfo.Inventor\":a.join(\",\"),\"tableInfo.InventorId\":i.join(\",\"),\"tableInfo.ActualInventor\":a.join(\",\"),\"tableInfo.ActualInventorId\":i.join(\",\")})}}))},changeState:function(t){this.setData({stateIndex:t.detail.value})},changeCompany:function(t){this.setData({companyIndex:t.detail.value})},changeDept:function(t){this.setData({deptIndex:t.detail.value})},changeType:function(t){this.setData({typeIndex:t.detail.value})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/intellectualProperty/intellectualProperty\",usingComponents:{}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{addPeopleNodes:[],table:{}}),submit:function(t){var e=this,a=t.detail.value,i={Remark:a.remark};if((!a.ActualInventor||!a.ActualName)&&5==this.data.nodeid)return console.log(a),void dd.alert({content:\"\\u8868\\u5355\\u672a\\u586b\\u5199\\u5b8c\\u6574\"});5==this.data.nodeid&&(this.data.table.ActualName=a.ActualName,this.data.table.Company=this.data.CompanyNames[this.data.companyIndex],this.data.table.ActualType=this.data.IntellectualPropertyTypes[this.data.iptIndex]),this.setData({disablePage:!0}),this._postData(\"IntellectualProperty/Modify\",function(t){e.aggreSubmit(i)},this.data.table)},print:function(){this._postData(\"IntellectualProperty/PrintAndSend\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\\uff0c\\u8bf7\\u5728\\u9489\\u9489\\u5de5\\u4f5c\\u901a\\u77e5\\u4e2d\\u67e5\\u6536\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid})},changeIptIndex:function(t){this.setData({iptIndex:t.detail.value})},changeCompany:function(t){this.setData({companyIndex:t.detail.value})},choosePeoples:function(t){this.data.addPeopleNodes=[5];var e=this;dd.complexChoose((0,i.default)({},e.chooseParam,{multiple:!0,success:function(t){var a=[],i=[],r=!0,o=!1,n=void 0;try{for(var l,d=t.users[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var s=l.value;a.push(s.name),i.push(s.userId)}}catch(t){o=!0,n=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw n}}e.setData({\"table.ActualInventor\":a.join(\",\"),\"table.ActualInventorId\":i.join(\",\")})},fail:function(t){}}))},onReady:function(){var t=this;this._getData(\"IntellectualProperty/Read\"+this.formatQueryStr({TaskId:this.data.taskid}),function(e){for(var a in e)null===e[a]&&(e[a]=\"\");t.setData({table:e})})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/sendRead/sendRead\",usingComponents:{}},(0,r.Page)({data:{},onLoad:function(){}}),(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{hidden:!0,imageList:[],fileList:[],pdfList:[]}),submit:function(t){var e=this,a=t.detail.value,i={Remark:a.remark};this.data.table.Suggestion=a.Suggestion,this.data.table.Leadership=a.Leadership,this._postData(\"Receiving/Modify\",function(t){e.aggreSubmit(i)},this.data.table)},onReady:function(){var t=this;this._getData(\"Receiving/Read\"+this.formatQueryStr({TaskId:this.data.taskid}),function(e){for(var a in e[0])null===e[0][a]&&(e[0][a]=\"\");console.log(\"2333333333333\"),console.log(e[0]),t.setData({table:e[0]})})}}))},function(t,e,a){\"use strict\";var i=l(a(3)),r=l(a(1)),o=a(0),n=l(a(2));function l(t){return t&&t.__esModule?t:{default:t}}o.bridge,o.bridge;o.$global.currentPageConfig={pagePath:\"page/start/borrowThing/borrowThing\",usingComponents:{}};var d={};(0,o.Page)((0,r.default)({},n.default.func,n.default.func.start,{data:(0,r.default)({},n.default.data,{hidden:!0,addPeopleNodes:[1],tableOperate:\"\\u9009\\u62e9\",purchaseList:[],tableParam2:{size:100,now:1,total:0},tableOperate2:\"\\u5220\\u9664\",good:{},totalPrice:0,tableItems:[{prop:\"FNumber\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"FName\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"FModel\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"FNote\",label:\"\\u9884\\u8ba1\\u5355\\u4ef7\",width:100}],tableItems2:[{prop:\"Supplier\",label:\"\\u4f9b\\u5e94\\u5546\",width:200},{prop:\"CodeNo\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"Name\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"Standard\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"Unit\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"Price\",label:\"\\u5355\\u4ef7\",width:100},{prop:\"Count\",label:\"\\u6570\\u91cf\",width:100},{prop:\"Purpose\",label:\"\\u7528\\u9014\",width:300},{prop:\"StartTime\",label:\"\\u5f00\\u59cb\\u65e5\\u671f\",width:200},{prop:\"EndTime\",label:\"\\u7ed3\\u675f\\u65e5\\u671f\",width:200},{prop:\"Mark\",label:\"\\u5907\\u6ce8\",width:300}]}),search:function(t){var e=t.detail.value;if(console.log(e),e&&e.keyWord){var a=this;a.requestData(\"GET\",\"Purchase/GetICItem\"+a.formatQueryStr({Key:e.keyWord}),function(t){console.log(JSON.parse(t.data)),a.setData({\"tableParam.total\":JSON.parse(t.data).length}),a.data.data=JSON.parse(t.data),a.getData()})}},submit:function(t){var e=this,a=t.detail.value,i={Title:a.title,Remark:a.remark,ProjectName:e.data.projectList[e.data.projectIndex].ProjectName,ProjectId:e.data.projectList[e.data.projectIndex].ProjectId};console.log(i),this.approvalSubmit(i,function(t){e.bindAll(t)})},bindAll:function(t){var e=this,a=[],i=!0,r=!1,o=void 0;try{for(var n,l=this.data.purchaseList[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;d.TaskId=t,a.push(d)}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}this._postData(\"Borrow/Save\",function(t){e.doneSubmit()},a)},chooseItem:function(t){t&&(console.log(t),(d=t.target.targetDataset.row)&&(this.setData({hidden:!this.data.hidden}),this.createMaskShowAnim(),this.createContentShowAnim()))},deleteItem:function(t){if(t){console.log(t);var e=t.target.targetDataset.index;(e||0==e)&&(console.log(this.data.purchaseList),this.data.purchaseList.splice(e,1),this.setData({purchaseList:this.data.purchaseList}),console.log(this.data.purchaseList))}},addGood:function(t){var e=t.detail.value;console.log(e);var a=!0,r=!1,o=void 0;try{for(var n,l=this.data.purchaseList[Symbol.iterator]();!(a=(n=l.next()).done);a=!0){if(n.value.CodeNo==d.FNumber)return}}catch(t){r=!0,o=t}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}if(e&&e.Unit&&e.Count&&e.StartTime&&e.EndTime&&e.Supplier&&e.Purpose){var s={Supplier:e.Supplier,CodeNo:d.FNumber,Name:d.FName,Standard:d.FModel,Unit:e.Unit,Price:e.Price?e.Price+\"\":\"0\",Count:e.Count,Purpose:e.Purpose,StartTime:e.StartTime,EndTime:e.EndTime,Mark:e.Mark},u=this.data.purchaseList.length;this.setData((0,i.default)({},\"purchaseList[\"+u+\"]\",s)),this.onModalCloseTap()}else dd.alert({content:\"\\u8868\\u5355\\u586b\\u5199\\u4e0d\\u5b8c\\u6574\"})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/approveDetail/borrowThing/borrowThing\",usingComponents:{}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.dowith,{data:(0,i.default)({},o.default.data,{hidden:!0,tableItems:[{prop:\"Supplier\",label:\"\\u4f9b\\u5e94\\u5546\",width:300},{prop:\"CodeNo\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"Name\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"Standard\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"Unit\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"Price\",label:\"\\u5355\\u4ef7(\\u9884\\u8ba1)\",width:200},{prop:\"Count\",label:\"\\u6570\\u91cf\",width:100},{prop:\"Purpose\",label:\"\\u7528\\u9014\",width:300},{prop:\"StartTime\",label:\"\\u5f00\\u59cb\\u65e5\\u671f\",width:200},{prop:\"EndTime\",label:\"\\u7ed3\\u675f\\u65e5\\u671f\",width:200},{prop:\"Mark\",label:\"\\u5907\\u6ce8\",width:300}]}),submit:function(t){var e=t.detail.value,a={Title:e.title,Remark:e.remark};this.aggreSubmit(a)},print:function(){this._postData(\"Borrow/PrintPDF\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid})},output:function(){this._postData(\"Borrow/PrintExcel\",function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6210\\u529f\"})},{UserId:this.data.DingData.userid,TaskId:this.data.taskid})}}))},function(t,e,a){\"use strict\";var i=l(a(3)),r=l(a(1)),o=a(0),n=l(a(2));function l(t){return t&&t.__esModule?t:{default:t}}o.bridge,o.bridge;o.$global.currentPageConfig={pagePath:\"page/start/maintain/maintain\",usingComponents:{}},(0,o.Page)((0,r.default)({},n.default.func,n.default.func.start,{data:(0,r.default)({},n.default.data,{hidden:!0,addPeopleNodes:[1],tableOperate:\"\\u9009\\u62e9\",purchaseList:[],tableParam2:{size:100,now:1,total:0},tableOperate2:\"\\u5220\\u9664\",good:{},totalPrice:0,tableItems:[{prop:\"FNumber\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"FName\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"FModel\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"FNote\",label:\"\\u9884\\u8ba1\\u5355\\u4ef7\",width:100}],tableItems2:[{prop:\"CodeNo\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:200},{prop:\"Name\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:300},{prop:\"Standard\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"Unit\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"Price\",label:\"\\u5355\\u4ef7\",width:100},{prop:\"Count\",label:\"\\u6570\\u91cf\",width:100},{prop:\"MaintainContent\",label:\"\\u7ef4\\u4fee\\u5185\\u5bb9\",width:300},{prop:\"NeedTime\",label:\"\\u9700\\u7528\\u65f6\\u95f4\",width:200},{prop:\"Mark\",label:\"\\u5907\\u6ce8\",width:300}]}),submit:function(t){var e=this,a=t.detail.value,i={Title:a.title,Remark:a.remark};console.log(i),this.approvalSubmit(i,function(t){e.bindAll(t)})},bindAll:function(t){var e=this,a=[],i=!0,r=!1,o=void 0;try{for(var n,l=this.data.purchaseList[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;d.TaskId=t,a.push(d)}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}this._postData(\"Maintain/Save\",function(t){e.doneSubmit()},a)},addGood:function(t){var e=t.detail.value;console.log(e),console.log(this.data.good);var a=!0,r=!1,o=void 0;try{for(var n,l=this.data.purchaseList[Symbol.iterator]();!(a=(n=l.next()).done);a=!0){if(n.value.CodeNo==this.data.good.FNumber)return}}catch(t){r=!0,o=t}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}if(e&&e.Unit&&e.Count&&e.NeedTime&&e.MaintainContent){var d={CodeNo:this.data.good.FNumber,Name:this.data.good.FName,Standard:this.data.good.FModel,Unit:e.Unit,Price:e.Price?e.Price+\"\":\"0\",Count:e.Count,MaintainContent:e.MaintainContent,NeedTime:e.NeedTime,Mark:e.Mark},s=this.data.purchaseList.length;this.setData((0,i.default)({},\"purchaseList[\"+s+\"]\",d)),this.onModalCloseTap()}else dd.alert({content:\"\\u8868\\u5355\\u586b\\u5199\\u4e0d\\u5b8c\\u6574\"})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/start/pickingManage/pickingManage\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.start,{data:(0,i.default)({},o.default.data,{tableItems:[{prop:\"fName\",label:\"\\u7269\\u6599\\u540d\\u79f0\",width:200},{prop:\"fNumber\",label:\"\\u7269\\u6599\\u7f16\\u7801\",width:300},{prop:\"unitName\",label:\"\\u5355\\u4f4d\",width:100},{prop:\"fPrice\",label:\"\\u5355\\u4ef7\",width:100},{prop:\"fQty\",label:\"\\u6570\\u91cf\",width:100},{prop:\"fModel\",label:\"\\u89c4\\u683c\\u578b\\u53f7\",width:300},{prop:\"fFullName\",label:\"\\u4f9b\\u5e94\\u5546\",width:300},{prop:\"ProjectName\",label:\"\\u9879\\u76ee\\u540d\\u79f0\",width:300},{prop:\"TaskId\",label:\"\\u6d41\\u6c34\\u53f7\",width:300},{prop:\"Remark\",label:\"\\u5907\\u6ce8\",width:300}],purchaseList:[],tableParams:{size:100,now:1,total:0}}),selectStartDateTime:function(){var t=this;dd.datePicker({format:\"yyyy-MM-dd HH:mm\",currentDate:this.data.DateStr+\" \"+this.data.TimeStr,startDate:\"2014-11-1\",endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day+\" \"+this.data.TimeStr,success:function(e){t.setData({\"table.StartTime\":e.date})}})},selectEndDateTime:function(){var t=this;dd.datePicker({format:\"yyyy-MM-dd HH:mm\",currentDate:this.data.DateStr+\" \"+this.data.TimeStr,startDate:\"2014-11-1\",endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day+\" \"+this.data.TimeStr,success:function(e){t.setData({\"table.EndTime\":e.date})}})},search:function(t){console.log(t);var e=this,a=t.detail.value;void 0==t.buttonTarget.dataset.isSend&&this._getData(\"Pick/Query\"+e.formatQueryStr({applyManId:this.data.DingData.userid,startTime:a.StartTime,endTime:a.EndTime,Key:a.keyWord}),function(t){console.log(t),e.setData({purchaseList:t})}),1==t.buttonTarget.dataset.isSend&&this._getData(\"Pick/Query\"+e.formatQueryStr({applyManId:this.data.DingData.userid,startTime:a.StartTime,endTime:a.EndTime,Key:a.keyWord,isSend:!0}),function(t){console.log(\"\\u5df2\\u63a8\\u9001\\u81f3\\u9489\\u9489\")})}}))},function(t,e,a){\"use strict\";var i=l(a(3)),r=l(a(1)),o=a(0),n=l(a(2));function l(t){return t&&t.__esModule?t:{default:t}}o.bridge,o.bridge;o.$global.currentPageConfig={pagePath:\"page/start/techonologySupply/techonologySupply\",usingComponents:{table:\"/util/table/table\",column:\"/util/table/column/column\"}},(0,o.Page)((0,r.default)({},n.default.func,n.default.func.start,{data:(0,r.default)({},n.default.data,{items:[{name:\"\\u667a\\u6167\\u5de5\\u5382\\u4e8b\\u4e1a\\u90e8\",value:\"\\u667a\\u6167\\u5de5\\u5382\\u4e8b\\u4e1a\\u90e8\",checked:!0},{name:\"\\u6570\\u63a7\\u4e00\\u4ee3\\u4e8b\\u4e1a\\u90e8\",value:\"\\u6570\\u63a7\\u4e00\\u4ee3\\u4e8b\\u4e1a\\u90e8\"},{name:\"\\u673a\\u5668\\u4eba\\u4e8b\\u4e1a\\u90e8\",value:\"\\u673a\\u5668\\u4eba\\u4e8b\\u4e1a\\u90e8\"},{name:\"\\u884c\\u653f\\u90e8\",value:\"\\u884c\\u653f\\u90e8\"},{name:\"\\u8d22\\u52a1\\u90e8\",value:\"\\u8d22\\u52a1\\u90e8\"},{name:\"\\u5236\\u9020\\u8bd5\\u9a8c\\u90e8\",value:\"\\u5236\\u9020\\u8bd5\\u9a8c\\u90e8\"},{name:\"\\u9879\\u76ee\\u63a8\\u8fdb\\u90e8\",value:\"\\u9879\\u76ee\\u63a8\\u8fdb\\u90e8\"},{name:\"\\u81ea\\u52a8\\u5316\\u4e8b\\u4e1a\\u90e8\",value:\"\\u81ea\\u52a8\\u5316\\u4e8b\\u4e1a\\u90e8\"}],array1:[\"\\u7814\\u53d1\\u7c7b\",\"\\u4ea7\\u54c1\\u7c7b\",\"\\u6559\\u80b2\\u7c7b\"],index1:0,array2:[\"\\u9ad8\",\"\\u4e2d\",\"\\u4f4e\"],index2:0,OtherEngineers:\"\",ResponsibleMan:\"\",rotate:\"RotateToTheRight\",show:\"hidden\"}),choosePeoples:function(t){console.log(\"start choose people\"),console.log(this.data.nodeList);t.target.targetDataset.NodeId;var e=this;dd.complexChoose((0,r.default)({},e.chooseParam,{multiple:!1,success:function(t){var a;console.log(t);var r=[],o=!0,n=!1,l=void 0;try{for(var d,s=t.users[Symbol.iterator]();!(o=(d=s.next()).done);o=!0){var u=d.value;r.push(u.name)}}catch(t){n=!0,l=t}finally{try{!o&&s.return&&s.return()}finally{if(n)throw l}}e.setData((a={\"table.PeerNumber\":r.join(\",\"),ResponsibleMan:t.users[0]},(0,i.default)(a,\"nodeList[1].ApplyMan\",t.users[0].name),(0,i.default)(a,\"nodeList[1].NodePeople\",[t.users[0].name]),a))},fail:function(t){}}))},choosePeople:function(t){console.log(\"start choose people\");t.target.targetDataset.NodeId;var e=this;dd.complexChoose((0,r.default)({},e.chooseParam,{multiple:!0,success:function(t){console.log(t);var a=[],i=!0,r=!1,o=void 0;try{for(var n,l=t.users[Symbol.iterator]();!(i=(n=l.next()).done);i=!0){var d=n.value;a.push(d.name)}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}e.setData({\"table.Inventor\":a.join(\",\"),OtherEngineers:t.users})},fail:function(t){}}))},bindPickerChangeOne:function(t){console.log(\"picker\\u53d1\\u9001\\u9009\\u62e9\\u6539\\u53d8\\uff0c\\u643a\\u5e26\\u503c\\u4e3a\",t.detail.value),this.setData({index1:t.detail.value})},bindPickerChangeTwo:function(t){console.log(\"picker\\u53d1\\u9001\\u9009\\u62e9\\u6539\\u53d8\\uff0c\\u643a\\u5e26\\u503c\\u4e3a\",t.detail.value),this.setData({index2:t.detail.value})},selectStartDateTime:function(){var t=this;dd.datePicker({format:\"yyyy-MM-dd HH:mm\",currentDate:this.data.DateStr+\" \"+this.data.TimeStr,startDate:this.data.DateStr+\" \"+this.data.TimeStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day+\" \"+this.data.TimeStr,success:function(e){t.setData({\"table.StartTime\":e.date})}})},submit:function(t){var e=this,a=t.detail.value;console.log(this.data.OtherEngineers);for(var r=\"\",o=\"\",n=0,l=this.data.OtherEngineers.length;n<l;n++)r=r+this.data.OtherEngineers[n].name+\",\",o=o+this.data.OtherEngineers[n].userId+\",\";r=r.substr(0,r.length-1),o=o.substr(0,o.length-1),console.log(this.data.DingData);var d=[{ApplyMan:this.data.DingData.nickName,ApplyManId:this.data.DingData.userid,ApplyTime:a.TimeRequired,Dept:this.data.DingData.departName,FlowId:\"34\",IsEnable:\"1\",IsSend:!1,NodeId:\"0\",Remark:a.remark,State:\"1\",Title:a.title},{ApplyMan:this.data.ResponsibleMan.name,ApplyManId:this.data.ResponsibleMan.userId,FlowId:\"34\",IsBack:null,IsEnable:1,IsSend:!1,NodeId:\"1\",OldFileUrl:null,State:0}],s=(0,i.default)({DeptName:a.DeptName.toString(),Customer:a.Customer,EmergencyLevel:this.data.array2[this.data.index2],MainPoints:a.MainPoints,OtherEngineers:r,OtherEngineersId:o,ResponsibleMan:this.data.ResponsibleMan.name,ResponsibleManId:this.data.ResponsibleMan.userId,ProjectOverview:a.ProjectOverview,ProjectType:this.data.array1[this.data.index1],Title:a.title,TaskId:\"\",TimeRequired:a.TimeRequired,remark:a.remark},\"MainPoints\",a.MainPoints);s.ResponsibleMan&&s.Customer&&s.Title&&s.ProjectType&&s.TimeRequired&&s.MainPoints&&s.ProjectOverview?this._postData(\"FlowInfoNew/CreateTaskInfo\",function(t){s.TaskId=t,e._postData(\"TechnicalSupport/Save\",function(t){dd.alert({content:\"\\u4fdd\\u5b58\\u6210\\u529f\",success:function(){dd.navigateBack({delta:2})}})},s)},d):dd.alert({content:\"\\u8bf7\\u5b8c\\u6574\\u586b\\u5199\\u8868\\u5355\"})},showOrClose:function(){\"RotateToTheRight\"==this.data.rotate?this.setData({rotate:\"Rotate-downward\",show:\"show\"}):\"Rotate-downward\"==this.data.rotate&&this.setData({rotate:\"RotateToTheRight\",show:\"hidden\"})}}))},function(t,e,a){\"use strict\";var i=n(a(1)),r=a(0),o=n(a(2));function n(t){return t&&t.__esModule?t:{default:t}}r.bridge,r.bridge;r.$global.currentPageConfig={pagePath:\"page/start/overTime/overTime\",usingComponents:{}},(0,r.Page)((0,i.default)({},o.default.func,o.default.func.start,{data:(0,i.default)({},o.default.data,{arrayOfTime:[\"08:30\",\"09:00\",\"09:30\",\"10:00\",\"10:30\",\"11:00\",\"11:30\",\"12:00\",\"12:30\",\"13:00\",\"13:30\",\"14:00\",\"14:30\",\"15:00\",\"15:30\",\"16:00\",\"16:30\",\"17:00\",\"17:30\",\"18:00\",\"18:30\",\"19:00\",\"19:30\",\"20:00\",\"20:30\",\"21:00\",\"21:30\",\"22:00\",\"22:30\",\"23:00\",\"23:30\"],index1:0,index2:0,hour:0}),selectStartDateTime:function(){var t=this;dd.datePicker({format:\"yyyy-MM-dd\",currentDate:this.data.DateStr+\" \"+this.data.TimeStr,startDate:this.data.DateStr+\" \"+this.data.TimeStr,endDate:this.data.Year+1+\"-\"+this.data.Month+\"-\"+this.data.Day+\" \"+this.data.TimeStr,success:function(e){t.setData({\"table.StartTime\":e.date})}})},bindPickerChangeOne:function(t){console.log(\"picker\\u53d1\\u9001\\u9009\\u62e9\\u6539\\u53d8\\uff0c\\u643a\\u5e26\\u503c\\u4e3a\",t.detail.value),this.setData({index1:t.detail.value})},bindPickerChangeTwo:function(t){console.log(\"picker\\u53d1\\u9001\\u9009\\u62e9\\u6539\\u53d8\\uff0c\\u643a\\u5e26\\u503c\\u4e3a\",t.detail.value),this.data.index2=t.detail.value,this.setData({index2:t.detail.value,hour:30*(this.data.index2-this.data.index1)/60})},submit:function(t){var e=this;console.log(t.detail.value);var a=t.detail.value,i=[{ApplyMan:this.data.DingData.nickName,ApplyManId:this.data.DingData.userid,ApplyTime:this.data.DateStr,Dept:this.data.DingData.departName,FlowId:\"17\",IsEnable:\"1\",IsSend:!1,NodeId:\"0\",State:\"1\",Title:a.title}];console.log(i);var r={DateTime:a.DateTime,EndTimeTime:this.data.arrayOfTime[this.data.index2],OverTimeContent:a.OverTimeContent,StartTime:this.data.arrayOfTime[this.data.index1],TaskId:\"\",Title:a.title,UseTime:this.conversionTimeFormat(this.data.hour),name:a.name};console.log(r),r.DateTime&&r.EndTimeTime&&r.StartTime&&r.OverTimeContent&&r.UseTime?this._postData(\"FlowInfoNew/CreateTaskInfo\",function(t){r.TaskId=t,e._postData(\"OverTimeTable/OverTimeTableSave\",function(t){dd.alert({content:\"\\u6210\\u529f\\u53d1\\u8d77\",success:function(){dd.navigateBack({delta:2})}})},r)},i):dd.alert({content:\"\\u8bf7\\u5b8c\\u6574\\u586b\\u5199\\u8868\\u5355\"})},conversionTimeFormat:function(t){var e=t.toString().split(\".\");return 1==e.length?e[0]+\":00\":2==e.length?e[0]+\":30\":void 0}}))}]);","extractedComments":[]}